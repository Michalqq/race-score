{"version":3,"file":"736.js","mappings":"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","sources":["webpack://javascript/./src/components/tables/PenaltyTable.jsx","webpack://javascript/./src/components/tables/DisqualificationTable.jsx","webpack://javascript/./src/components/page/StageScorePage.jsx"],"sourcesContent":["/* eslint-disable react/display-name */\r\nimport React, { useMemo, useEffect, useState } from \"react\";\r\nimport ResultTable from \"../common/table/ResultTable\";\r\nimport { TeamDiv } from \"../common/Div\";\r\nimport { NrBadge } from \"../common/NrBadge\";\r\nimport axios from \"axios\";\r\nimport { backendUrl } from \"../utils/fetchUtils\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faTimesCircle } from \"@fortawesome/free-solid-svg-icons\";\r\nimport authHeader from \"../../service/auth-header\";\r\n\r\nconst PenaltyTable = (props) => {\r\n  const [penalties, setPenalties] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  const fetchPenalties = () => {\r\n    axios\r\n      .get(`${backendUrl()}/penalty/getPenalties?eventId=${props.eventId}`)\r\n      .then((res) => {\r\n        setPenalties(res.data);\r\n        setIsLoading(false);\r\n      });\r\n  };\r\n\r\n  const removePenalty = (penaltyId) => {\r\n    axios\r\n      .post(\r\n        `${backendUrl()}/penalty/removePenalty?penaltyId=${penaltyId}`,\r\n        {},\r\n        {\r\n          headers: authHeader(),\r\n        }\r\n      )\r\n      .then((res) => {\r\n        props.onRemove();\r\n        fetchPenalties();\r\n      });\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchPenalties();\r\n  }, []);\r\n\r\n  const columns = useMemo(\r\n    () => [\r\n      {\r\n        width: \"20%\",\r\n        id: \"team\",\r\n        Header: \"Załoga\",\r\n        disableFilters: true,\r\n        disableSortBy: true,\r\n        Cell: (cellInfo) => (\r\n          <>\r\n            <div className=\"py-1 px-2 mx-1 d-grid\">\r\n              <NrBadge value={cellInfo.row.original.number}></NrBadge>\r\n            </div>\r\n            <div className=\"px-1 mx-1 d-grid\">\r\n              <TeamDiv team={cellInfo.row.original} />\r\n            </div>\r\n          </>\r\n        ),\r\n      },\r\n      {\r\n        width: \"70%\",\r\n        id: \"penalty\",\r\n        Header: \"Czas - Powód - OS/PS\",\r\n        disableFilters: true,\r\n        disableSortBy: true,\r\n        Cell: (cellInfo) => (\r\n          <table className=\"font14\">\r\n            {cellInfo.row.original.penalties.map((penalty) => (\r\n              <>\r\n                <tr>\r\n                  <td className=\"text-left fw-bolder\" style={{ width: \"20%\" }}>\r\n                    {penalty.penaltySec + \" s\"}\r\n                  </td>\r\n                  <td className=\"text-left px-3\" style={{ width: \"45%\" }}>\r\n                    {penalty.description}\r\n                  </td>\r\n                  <td className=\"text-left px-3\" style={{ width: \"40%\" }}>\r\n                    {penalty.name}\r\n                  </td>\r\n                  <td style={{ width: \"15%\" }}>\r\n                    {props.referee ? (\r\n                      <FontAwesomeIcon\r\n                        icon={faTimesCircle}\r\n                        onClick={() => removePenalty(penalty.penaltyId)}\r\n                        title={\"Usuń kare\"}\r\n                      />\r\n                    ) : (\r\n                      <></>\r\n                    )}\r\n                  </td>\r\n                </tr>\r\n              </>\r\n            ))}\r\n          </table>\r\n        ),\r\n      },\r\n    ],\r\n    [props.referee]\r\n  );\r\n\r\n  return (\r\n    <ResultTable\r\n      columns={columns}\r\n      data={penalties}\r\n      pageCount={3}\r\n      isLoading={isLoading}\r\n      isFooter={false}\r\n      isHeader={true}\r\n      cursor={\"pointer\"}\r\n      manualPagination={true}\r\n    />\r\n  );\r\n};\r\n\r\nexport default PenaltyTable;\r\n","/* eslint-disable react/display-name */\r\nimport React, { useMemo, useEffect, useState } from \"react\";\r\nimport ResultTable from \"../common/table/ResultTable\";\r\nimport { TeamDiv } from \"../common/Div\";\r\nimport axios from \"axios\";\r\nimport { backendUrl } from \"../utils/fetchUtils\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faTimesCircle } from \"@fortawesome/free-solid-svg-icons\";\r\nimport authHeader from \"../../service/auth-header\";\r\nimport { NrBadge } from \"../common/NrBadge\";\r\n\r\nconst DisqualificationTable = (props) => {\r\n  const [penalties, setPenalties] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  const fetchPenalties = () => {\r\n    axios\r\n      .get(\r\n        `${backendUrl()}/penalty/getDisqualifications?eventId=${props.eventId}`\r\n      )\r\n      .then((res) => {\r\n        setPenalties(res.data);\r\n        setIsLoading(false);\r\n      });\r\n  };\r\n\r\n  const removePenalty = (penaltyId) => {\r\n    axios\r\n      .post(\r\n        `${backendUrl()}/penalty/removeDisqualification?penaltyId=${penaltyId}`,\r\n        {},\r\n        {\r\n          headers: authHeader(),\r\n        }\r\n      )\r\n      .then((res) => {\r\n        setIsLoading(true);\r\n        props.onRemove();\r\n        fetchPenalties();\r\n      });\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchPenalties();\r\n  }, []);\r\n\r\n  const columns = useMemo(\r\n    () => [\r\n      {\r\n        width: \"5%\",\r\n        id: \"nr\",\r\n        Header: \"Nr\",\r\n        accessor: (cellInfo) => cellInfo.number,\r\n        disableFilters: true,\r\n        disableSortBy: true,\r\n        Cell: (row) => <NrBadge value={row.value}></NrBadge>,\r\n      },\r\n      {\r\n        width: \"20%\",\r\n        id: \"team\",\r\n        Header: \"Załoga\",\r\n        disableFilters: true,\r\n        disableSortBy: true,\r\n        Cell: (cellInfo) => <TeamDiv team={cellInfo.row.original} />,\r\n      },\r\n      {\r\n        width: \"60%\",\r\n        id: \"penalty\",\r\n        Header: \"Powód - OS/PS\",\r\n        disableFilters: true,\r\n        disableSortBy: true,\r\n        Cell: (cellInfo) => (\r\n          <table className=\"font14\">\r\n            {cellInfo.row.original.penalties.map((penalty) => (\r\n              <>\r\n                <tr>\r\n                  <td className=\"text-left fw-bolder\"></td>\r\n                  <td className=\"text-left px-3 width-300\">\r\n                    {penalty.description}\r\n                  </td>\r\n                  <td className=\"text-left px-3\">{penalty.name}</td>\r\n                  <td>\r\n                    {props.referee ? (\r\n                      <FontAwesomeIcon\r\n                        icon={faTimesCircle}\r\n                        onClick={() => removePenalty(penalty.penaltyId)}\r\n                        title={\"Wycofaj dyskwalifikacje\"}\r\n                      />\r\n                    ) : (\r\n                      <></>\r\n                    )}\r\n                  </td>\r\n                </tr>\r\n              </>\r\n            ))}\r\n          </table>\r\n        ),\r\n      },\r\n    ],\r\n    [props.referee]\r\n  );\r\n\r\n  return (\r\n    <>\r\n      <ResultTable\r\n        columns={columns}\r\n        data={penalties}\r\n        pageCount={3}\r\n        isLoading={isLoading}\r\n        isFooter={false}\r\n        isHeader={true}\r\n        cursor={\"pointer\"}\r\n        manualPagination={true}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default DisqualificationTable;\r\n","/* eslint-disable react/display-name */\r\nimport React, { useState, useMemo, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport ResultTable from \"../common/table/ResultTable\";\r\nimport { useLocation, useNavigate } from \"react-router-dom\";\r\nimport { ScoreDiv, ScoreDivPenalty, TeamDiv, CarDiv } from \"../common/Div\";\r\nimport { Selector } from \"../common/Selector\";\r\nimport { backendUrl, checkReferee, fetchGetScores } from \"../utils/fetchUtils\";\r\nimport PenaltyTable from \"../tables/PenaltyTable\";\r\nimport DisqualificationTable from \"../tables/DisqualificationTable\";\r\nimport { NrBadge } from \"../common/NrBadge\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport { download } from \"../utils/fileUtils\";\r\nimport Spinner from \"react-bootstrap/Spinner\";\r\nimport { MyButton } from \"../common/Button\";\r\n\r\nconst StageScorePage = (props) => {\r\n  const location = useLocation();\r\n  const eventRedirect = useLocation().search;\r\n  const index = eventRedirect.includes(\"&\")\r\n    ? eventRedirect.indexOf(\"&\")\r\n    : eventRedirect.length;\r\n  const eventFromRedirect = eventRedirect.substring(0, index).replace(\"?\", \"\");\r\n\r\n  const navigate = useNavigate();\r\n\r\n  const eventId = eventFromRedirect\r\n    ? eventFromRedirect\r\n    : localStorage.getItem(\"eventId\") || location.state?.eventId;\r\n\r\n  const GENERAL = \"GENERALNA\";\r\n\r\n  const [event, setEvent] = useState();\r\n\r\n  const [scores, setScores] = useState([]);\r\n  const [referee, setReferee] = useState(false);\r\n\r\n  const [summedScores, setSummedScores] = useState([]);\r\n  const [psOptions, setPsOptions] = useState([]);\r\n  const [classesOptions, setClassesOptions] = useState([]);\r\n\r\n  const [currentClass, setCurrentClass] = useState(GENERAL);\r\n  const [stage, setStage] = useState();\r\n\r\n  const [stageName, setStageName] = useState(\"\");\r\n\r\n  const [loading, setLoading] = useState(true);\r\n  const [loadingScoreFile, setLoadingScoreFile] = useState(false);\r\n\r\n  const fetchScores = () => {\r\n    fetchGetScores(stage, (data) => {\r\n      setScores(data);\r\n      setLoading(false);\r\n    });\r\n  };\r\n\r\n  const fetchScoresAndUpdate = () => {\r\n    fetchGetScores(stage, (data) => {\r\n      setScores(data);\r\n      fetchSummedScores();\r\n    });\r\n  };\r\n\r\n  const fetchSummedScores = () => {\r\n    axios\r\n      .get(\r\n        `${backendUrl()}/score/getStagesSumScores?eventId=${eventId}&stageId=${stage}`\r\n      )\r\n      .then((res) => {\r\n        setSummedScores(res.data);\r\n        setLoading(false);\r\n      });\r\n  };\r\n\r\n  const fetchPsOptions = () => {\r\n    axios\r\n      .get(`${backendUrl()}/event/getStagesAndClasses?eventId=${eventId}`)\r\n      .then((res) => {\r\n        setPsOptions(res.data.psOptions || []);\r\n        setClassesOptions(res.data.classesOptions || []);\r\n      });\r\n  };\r\n\r\n  const fetchEvent = () => {\r\n    axios\r\n      .get(`${backendUrl()}/event/getEvent?eventId=${eventId}`)\r\n      .then((res) => {\r\n        setEvent({\r\n          ...res.data,\r\n          date: new Date(res.data.date),\r\n          signDeadline: new Date(res.data.signDeadline),\r\n        });\r\n      });\r\n  };\r\n  const fetchData = () => {\r\n    setLoading(true);\r\n    if (stage !== undefined) {\r\n      fetchScores();\r\n      fetchSummedScores();\r\n      fetchEvent();\r\n    }\r\n  };\r\n\r\n  const getScoresFile = () => {\r\n    setLoadingScoreFile(true);\r\n    download(\r\n      `${backendUrl()}/file/getScoresFile?eventId=${eventId}`,\r\n      \"wyniki_\" + event.name + \".xlsx\",\r\n      () => setLoadingScoreFile(false)\r\n    );\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (eventId === undefined) navigate(\"/\");\r\n    checkReferee(eventId, setReferee);\r\n  }, []);\r\n\r\n  // useEffect(() => {\r\n  //   setTimeout(() => fetchScoresAndUpdate(), 1000 * 20);\r\n  // }, [scores]);\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, [stage]);\r\n\r\n  useEffect(() => {\r\n    fetchPsOptions();\r\n    fetchData();\r\n  }, []);\r\n\r\n  const columns = useMemo(\r\n    () => [\r\n      {\r\n        width: \"5%\",\r\n        id: \"place\",\r\n        Header: \"P.\",\r\n        accessor: (cellInfo) => cellInfo.place,\r\n        disableFilters: true,\r\n        disableSortBy: true,\r\n        Cell: (row) => <> {row.row.index + 1}</>,\r\n      },\r\n      {\r\n        width: \"7%\",\r\n        id: \"nr\",\r\n        Header: \"Nr\",\r\n        accessor: (cellInfo) => cellInfo.number,\r\n        disableFilters: true,\r\n        disableSortBy: true,\r\n        Cell: (row) => <NrBadge value={row.value}></NrBadge>,\r\n      },\r\n      {\r\n        width: \"30%\",\r\n        id: \"team\",\r\n        Header: \"Załoga\",\r\n        disableFilters: true,\r\n        disableSortBy: true,\r\n        Cell: (cellInfo) => <TeamDiv team={cellInfo.row.original} />,\r\n      },\r\n      {\r\n        width: \"30%\",\r\n        id: \"car\",\r\n        Header: \"Samochód\",\r\n        disableFilters: true,\r\n        disableSortBy: true,\r\n        Cell: (cellInfo) => (\r\n          <CarDiv\r\n            line1={cellInfo.row.original.car}\r\n            line2={cellInfo.row.original.className}\r\n            carBrand={cellInfo.row.original.brand}\r\n            driveType={cellInfo.row.original.driveType}\r\n          />\r\n        ),\r\n      },\r\n      {\r\n        width: \"15%\",\r\n        id: \"score\",\r\n        Header: \"Czas / kary\",\r\n        accessor: (cellInfo) => cellInfo.stageScore,\r\n        disableFilters: true,\r\n        disableSortBy: true,\r\n        Cell: (cellInfo) => (\r\n          <ScoreDivPenalty\r\n            line1={cellInfo.row.original.stageScore}\r\n            line2={cellInfo.row.original.totalPenalty}\r\n          />\r\n        ),\r\n      },\r\n      {\r\n        width: \"15%\",\r\n        id: \"result\",\r\n        Header: \"Wynik / straty\",\r\n        accessor: (cellInfo) => cellInfo.stageScore,\r\n        disableFilters: true,\r\n        disableSortBy: true,\r\n        Cell: (cellInfo) => (\r\n          <ScoreDiv\r\n            line1={cellInfo.row.original.totalTime}\r\n            line2={cellInfo.row.original.timeTo}\r\n            line3={cellInfo.row.original.timeToFirst}\r\n          />\r\n        ),\r\n      },\r\n    ],\r\n    []\r\n  );\r\n\r\n  return (\r\n    <>\r\n      <div className=\"row card-body mx-0\">\r\n        <h4>{event?.name || \"\"}</h4>\r\n        <div className=\"col-xl-8 d-flex justify-content-center\">\r\n          {(event?.logoPathFile || event?.logoPath) && (\r\n            <div className=\"col-6 align-self-center\">\r\n              <div className=\"m-0 text-center\">\r\n                {event.logoPathFile ? (\r\n                  <img\r\n                    id={\"eventImage\" + event.eventId}\r\n                    style={{ maxHeight: \"150px\" }}\r\n                    className=\"img-fluid rounded float-left\"\r\n                    src={\"data:image/jpg;base64,\" + event.logoPathFile}\r\n                    alt=\"Logo\"\r\n                  ></img>\r\n                ) : (\r\n                  <img\r\n                    style={{ maxHeight: \"150px\" }}\r\n                    className=\"img-fluid rounded float-left\"\r\n                    src={event.logoPath}\r\n                    alt=\"Logo\"\r\n                  ></img>\r\n                )}\r\n              </div>\r\n            </div>\r\n          )}\r\n          <div className=\"col-6\">\r\n            <Selector\r\n              label={\"Klasyfikacja\"}\r\n              options={classesOptions}\r\n              handleChange={(value) => {\r\n                setCurrentClass(\r\n                  classesOptions.find((e) => e.value === value).label\r\n                );\r\n              }}\r\n              isValid={true}\r\n            />\r\n            <Selector\r\n              label={\"PS\"}\r\n              options={psOptions}\r\n              value={sessionStorage.getItem(\"scoreStageId\")}\r\n              handleChange={(value) => {\r\n                setStage(value);\r\n                setStageName(psOptions.find((e) => e.value === value).label);\r\n                sessionStorage.setItem(\"scoreStageId\", value);\r\n              }}\r\n              isValid={true}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"col-xl-4\">\r\n          <div className=\"m-2 text-center\">\r\n            {referee && (\r\n              <>\r\n                <Button\r\n                  className={\"m-1\"}\r\n                  variant=\"success\"\r\n                  onClick={() =>\r\n                    navigate(`/add_score`, {\r\n                      state: { eventId: eventId },\r\n                    })\r\n                  }\r\n                >\r\n                  Dodaj wynik\r\n                </Button>\r\n                <Button\r\n                  className={\"m-1\"}\r\n                  variant=\"primary\"\r\n                  onClick={() =>\r\n                    navigate(`/add_penalty`, {\r\n                      state: { eventId: eventId },\r\n                    })\r\n                  }\r\n                >\r\n                  Dodaj kare\r\n                </Button>\r\n                <MyButton\r\n                  variant=\"secondary\"\r\n                  isLoading={loadingScoreFile}\r\n                  onClick={() => getScoresFile()}\r\n                  msg=\"Generuj plik z zestawieniem wyników\"\r\n                  loadingMsg=\"Trwa generowanie\r\n                  pliku z wynikami\"\r\n                />\r\n              </>\r\n            )}\r\n            <Button\r\n              className={\"m-1\"}\r\n              variant=\"primary\"\r\n              onClick={() => fetchData()}\r\n            >\r\n              Odśwież\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className=\"row pt-2 mx-0 card-body\">\r\n        <div className=\"col-xl-6 px-0 pe-1\">\r\n          <div className=\"shadow bg-body rounded\">\r\n            <div\r\n              className=\"fw-bold alert alert-secondary p-1 m-0 \"\r\n              role=\"alert\"\r\n            >\r\n              {`Czas NA odcinku - ${stageName}`}\r\n            </div>\r\n            <ResultTable\r\n              columns={columns}\r\n              data={\r\n                currentClass !== GENERAL\r\n                  ? scores.filter(\r\n                      (x) =>\r\n                        x.className === currentClass ||\r\n                        x.driveType === currentClass\r\n                    )\r\n                  : scores\r\n              }\r\n              pageCount={3}\r\n              isLoading={loading}\r\n              isFooter={false}\r\n              isHeader={true}\r\n              cursor={\"pointer\"}\r\n              manualPagination={true}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"col-xl-6 px-0 ps-1\">\r\n          <div className=\"shadow bg-body rounded\">\r\n            <div className=\"fw-bold alert alert-secondary p-1 m-0\" role=\"alert\">\r\n              {`Suma czasów PO odcinku - ${stageName}`}\r\n            </div>\r\n            <ResultTable\r\n              columns={columns}\r\n              data={\r\n                currentClass !== GENERAL\r\n                  ? summedScores.filter(\r\n                      (x) =>\r\n                        x.className === currentClass ||\r\n                        x.driveType === currentClass\r\n                    )\r\n                  : summedScores\r\n              }\r\n              pageCount={3}\r\n              isLoading={loading}\r\n              isFooter={false}\r\n              isHeader={true}\r\n              cursor={\"pointer\"}\r\n              manualPagination={true}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"col-xl-12 px-1\">\r\n          <div className=\"shadow bg-body rounded mt-4 p-0\">\r\n            <div className=\"fw-bold alert alert-secondary p-1 m-0\" role=\"alert\">\r\n              {\"Kary\"}\r\n            </div>\r\n            <PenaltyTable\r\n              eventId={eventId}\r\n              onRemove={fetchData}\r\n              referee={referee}\r\n            />\r\n          </div>\r\n          <div className=\"shadow bg-body rounded mt-4\">\r\n            <div className=\"fw-bold alert alert-secondary p-1 m-0\" role=\"alert\">\r\n              {`Dyskwalifikacje / Wycofania`}\r\n            </div>\r\n            <DisqualificationTable\r\n              eventId={eventId}\r\n              onRemove={fetchData}\r\n              referee={referee}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default StageScorePage;\r\n"],"names":["props","useState","penalties","setPenalties","isLoading","setIsLoading","fetchPenalties","axios","backendUrl","eventId","then","res","data","useEffect","columns","useMemo","width","id","Header","disableFilters","disableSortBy","Cell","cellInfo","className","NrBadge","value","row","original","number","team","map","penalty","style","penaltySec","description","name","referee","icon","faTimesCircle","onClick","penaltyId","headers","authHeader","onRemove","title","ResultTable","pageCount","isFooter","isHeader","cursor","manualPagination","accessor","location","useLocation","eventRedirect","search","index","includes","indexOf","length","eventFromRedirect","substring","replace","navigate","useNavigate","localStorage","getItem","state","GENERAL","event","setEvent","scores","setScores","setReferee","summedScores","setSummedScores","psOptions","setPsOptions","classesOptions","setClassesOptions","currentClass","setCurrentClass","stage","setStage","stageName","setStageName","loading","setLoading","loadingScoreFile","setLoadingScoreFile","fetchData","undefined","fetchGetScores","date","Date","signDeadline","checkReferee","place","line1","car","line2","carBrand","brand","driveType","stageScore","totalPenalty","totalTime","timeTo","line3","timeToFirst","logoPathFile","logoPath","maxHeight","src","alt","Selector","label","options","handleChange","find","e","isValid","sessionStorage","setItem","Button","variant","download","msg","loadingMsg","role","filter","x"],"sourceRoot":""}