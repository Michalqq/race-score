"use strict";(self.webpackChunkjavascript=self.webpackChunkjavascript||[]).push([[736],{736:function(e,t,n){n.r(t),n.d(t,{default:function(){return A}});var r=n(7294),a=n(9669),l=n.n(a),o=n(496),i=n(6974),c=n(9661),s=n(6668),u=n(9942),d=n(3992),m=n(7625),f=n(1436),y=n(9952);function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);o=!0);}catch(e){i=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(i)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var v=function(e){var t=g((0,r.useState)([]),2),n=t[0],a=t[1],i=g((0,r.useState)(!0),2),s=i[0],p=i[1],v=function(){l().get("".concat((0,u.AC)(),"/penalty/getPenalties?eventId=").concat(e.eventId)).then((function(e){a(e.data),p(!1)}))};(0,r.useEffect)((function(){v()}),[]);var b=(0,r.useMemo)((function(){return[{width:"20%",id:"team",Header:"Załoga",disableFilters:!0,disableSortBy:!0,Cell:function(e){return r.createElement(r.Fragment,null,r.createElement("div",{className:"py-1 px-2 mx-1 d-grid"},r.createElement(d.M,{value:e.row.original.number})),r.createElement("div",{className:"px-1 mx-1 d-grid"},r.createElement(c.Ur,{team:e.row.original})))}},{width:"70%",id:"penalty",Header:"Czas - Powód - OS/PS",disableFilters:!0,disableSortBy:!0,Cell:function(t){return r.createElement("table",{className:"font14"},t.row.original.penalties.map((function(t){return r.createElement(r.Fragment,null,r.createElement("tr",null,r.createElement("td",{className:"text-left fw-bolder",style:{width:"20%"}},t.penaltySec+" s"),r.createElement("td",{className:"text-left px-3",style:{width:"45%"}},t.description),r.createElement("td",{className:"text-left px-3",style:{width:"40%"}},t.name),r.createElement("td",{style:{width:"15%"}},e.referee?r.createElement(m.G,{icon:f.nYk,onClick:function(){return n=t.penaltyId,void l().post("".concat((0,u.AC)(),"/penalty/removePenalty?penaltyId=").concat(n),{},{headers:(0,y.Z)()}).then((function(t){e.onRemove(),v()}));var n},title:"Usuń kare"}):r.createElement(r.Fragment,null))))})))}}]}),[e.referee]);return r.createElement(o.Z,{columns:b,data:n,pageCount:3,isLoading:s,isFooter:!1,isHeader:!0,cursor:"pointer",manualPagination:!0})};function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);o=!0);}catch(e){i=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(i)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var E=function(e){var t=b((0,r.useState)([]),2),n=t[0],a=t[1],i=b((0,r.useState)(!0),2),s=i[0],g=i[1],p=function(){l().get("".concat((0,u.AC)(),"/penalty/getDisqualifications?eventId=").concat(e.eventId)).then((function(e){a(e.data),g(!1)}))};(0,r.useEffect)((function(){p()}),[]);var v=(0,r.useMemo)((function(){return[{width:"5%",id:"nr",Header:"Nr",accessor:function(e){return e.number},disableFilters:!0,disableSortBy:!0,Cell:function(e){return r.createElement(d.M,{value:e.value})}},{width:"20%",id:"team",Header:"Załoga",disableFilters:!0,disableSortBy:!0,Cell:function(e){return r.createElement(c.Ur,{team:e.row.original})}},{width:"60%",id:"penalty",Header:"Powód - OS/PS",disableFilters:!0,disableSortBy:!0,Cell:function(t){return r.createElement("table",{className:"font14"},t.row.original.penalties.map((function(t){return r.createElement(r.Fragment,null,r.createElement("tr",null,r.createElement("td",{className:"text-left fw-bolder"}),r.createElement("td",{className:"text-left px-3 width-300"},t.description),r.createElement("td",{className:"text-left px-3"},t.name),r.createElement("td",null,e.referee?r.createElement(m.G,{icon:f.nYk,onClick:function(){return n=t.penaltyId,void l().post("".concat((0,u.AC)(),"/penalty/removeDisqualification?penaltyId=").concat(n),{},{headers:(0,y.Z)()}).then((function(t){g(!0),e.onRemove(),p()}));var n},title:"Wycofaj dyskwalifikacje"}):r.createElement(r.Fragment,null))))})))}}]}),[e.referee]);return r.createElement(r.Fragment,null,r.createElement(o.Z,{columns:v,data:n,pageCount:3,isLoading:s,isFooter:!1,isHeader:!0,cursor:"pointer",manualPagination:!0}))},h=n(5005),S=n(4010),N=n(2763);function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){I(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);o=!0);}catch(e){i=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(i)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var A=function(e){var t=(0,i.TH)(),n=(0,i.s0)(),a=localStorage.getItem("eventId")||t.state.eventId,m="GENERALNA",f=j((0,r.useState)(),2),y=f[0],g=f[1],p=j((0,r.useState)([]),2),b=p[0],w=p[1],C=j((0,r.useState)(!1),2),I=C[0],O=C[1],A=j((0,r.useState)([]),2),k=A[0],F=A[1],P=j((0,r.useState)([]),2),H=P[0],D=P[1],B=j((0,r.useState)([]),2),T=B[0],Z=B[1],M=j((0,r.useState)(m),2),z=M[0],L=M[1],U=j((0,r.useState)(),2),R=U[0],G=U[1],W=j((0,r.useState)(""),2),K=W[0],$=W[1],_=j((0,r.useState)(!0),2),q=_[0],Q=_[1],V=j((0,r.useState)(!1),2),Y=V[0],J=V[1],X=function(){Q(!0),void 0!==R&&((0,u.W5)(R,(function(e){w(e),Q(!1)})),l().get("".concat((0,u.AC)(),"/score/getStagesSumScores?eventId=").concat(a,"&stageId=").concat(R)).then((function(e){F(e.data),Q(!1)})),l().get("".concat((0,u.AC)(),"/event/getEvent?eventId=").concat(a)).then((function(e){g(x(x({},e.data),{},{date:new Date(e.data.date),signDeadline:new Date(e.data.signDeadline)}))})))};(0,r.useEffect)((function(){void 0===a&&n("/"),(0,u.Ot)(a,O)}),[]),(0,r.useEffect)((function(){X()}),[R]),(0,r.useEffect)((function(){l().get("".concat((0,u.AC)(),"/event/getStagesAndClasses?eventId=").concat(a)).then((function(e){D(e.data.psOptions||[]),Z(e.data.classesOptions||[])})),X()}),[]);var ee=(0,r.useMemo)((function(){return[{width:"5%",id:"place",Header:"P.",accessor:function(e){return e.place},disableFilters:!0,disableSortBy:!0,Cell:function(e){return r.createElement(r.Fragment,null," ",e.row.index+1)}},{width:"7%",id:"nr",Header:"Nr",accessor:function(e){return e.number},disableFilters:!0,disableSortBy:!0,Cell:function(e){return r.createElement(d.M,{value:e.value})}},{width:"30%",id:"team",Header:"Załoga",disableFilters:!0,disableSortBy:!0,Cell:function(e){return r.createElement(c.Ur,{team:e.row.original})}},{width:"30%",id:"car",Header:"Samochód",disableFilters:!0,disableSortBy:!0,Cell:function(e){return r.createElement(c.He,{line1:e.row.original.car,line2:e.row.original.className,carBrand:e.row.original.brand,driveType:e.row.original.driveType})}},{width:"15%",id:"score",Header:"Czas / kary",accessor:function(e){return e.stageScore},disableFilters:!0,disableSortBy:!0,Cell:function(e){return r.createElement(c.O8,{line1:e.row.original.stageScore,line2:e.row.original.totalPenalty})}},{width:"15%",id:"result",Header:"Wynik / straty",accessor:function(e){return e.stageScore},disableFilters:!0,disableSortBy:!0,Cell:function(e){return r.createElement(c.AK,{line1:e.row.original.totalTime,line2:e.row.original.timeTo,line3:e.row.original.timeToFirst})}}]}),[]);return r.createElement(r.Fragment,null,r.createElement("div",{className:"row"},r.createElement("p",{style:{fontSize:"11px"},className:"my-0 py-0"},"Aplikacja w fazie testów"),r.createElement("h4",null,(null==y?void 0:y.name)||""),r.createElement("div",{className:"col-xl-8 d-flex justify-content-center"},((null==y?void 0:y.logoPathFile)||(null==y?void 0:y.logoPath))&&r.createElement("div",{className:"col-6 align-self-center"},r.createElement("div",{className:"m-2 text-center"},y.logoPathFile?r.createElement("img",{id:"eventImage"+y.eventId,style:{maxHeight:"120px"},className:"img-fluid rounded float-left",src:"data:image/jpg;base64,"+y.logoPathFile,alt:"Logo"}):r.createElement("img",{style:{maxHeight:"120px"},className:"img-fluid rounded float-left",src:y.logoPath,alt:"Logo"}))),r.createElement("div",{className:"col-6"},r.createElement(s.Q,{label:"Klasyfikacja",options:T,handleChange:function(e){L(T.find((function(t){return t.value===e})).label)},isValid:!0}),r.createElement(s.Q,{label:"PS",options:H,value:sessionStorage.getItem("scoreStageId"),handleChange:function(e){G(e),$(H.find((function(t){return t.value===e})).label),sessionStorage.setItem("scoreStageId",e)},isValid:!0}))),r.createElement("div",{className:"col-xl-4"},r.createElement("div",{className:"m-2 text-center"},I&&r.createElement(r.Fragment,null,r.createElement(h.Z,{className:"m-1",variant:"success",onClick:function(){return n("/add_score",{state:{eventId:a}})}},"Dodaj wynik"),r.createElement(h.Z,{className:"m-1",variant:"primary",onClick:function(){return n("/add_penalty",{state:{eventId:a}})}},"Dodaj kare"),r.createElement(N.O,{variant:"secondary",isLoading:Y,onClick:function(){return J(!0),void(0,S.L)("".concat((0,u.AC)(),"/file/getScoresFile?eventId=").concat(a),"wyniki_"+y.name+".xlsx",(function(){return J(!1)}))},msg:"Generuj plik z zestawieniem wyników",loadingMsg:"Trwa generowanie\r pliku z wynikami"})),r.createElement(h.Z,{className:"m-1",variant:"primary",onClick:function(){return X()}},"Odśwież")))),r.createElement("div",{className:"row pt-2 mx-0"},r.createElement("div",{className:"col-xl-6 px-0 pe-1"},r.createElement("div",{className:"shadow bg-body rounded"},r.createElement("div",{className:"fw-bold alert alert-secondary p-1 m-0 ",role:"alert"},"Czas NA odcinku - ".concat(K)),r.createElement(o.Z,{columns:ee,data:z!==m?b.filter((function(e){return e.className===z||e.driveType===z})):b,pageCount:3,isLoading:q,isFooter:!1,isHeader:!0,cursor:"pointer",manualPagination:!0}))),r.createElement("div",{className:"col-xl-6 px-0 ps-1"},r.createElement("div",{className:"shadow bg-body rounded"},r.createElement("div",{className:"fw-bold alert alert-secondary p-1 m-0",role:"alert"},"Suma czasów PO odcinku - ".concat(K)),r.createElement(o.Z,{columns:ee,data:z!==m?k.filter((function(e){return e.className===z||e.driveType===z})):k,pageCount:3,isLoading:q,isFooter:!1,isHeader:!0,cursor:"pointer",manualPagination:!0}))),r.createElement("div",{className:"col-xl-12 px-1"},r.createElement("div",{className:"shadow bg-body rounded mt-4 p-0"},r.createElement("div",{className:"fw-bold alert alert-secondary p-1 m-0",role:"alert"},"Kary"),r.createElement(v,{eventId:a,onRemove:X,referee:I})),r.createElement("div",{className:"shadow bg-body rounded mt-4"},r.createElement("div",{className:"fw-bold alert alert-secondary p-1 m-0",role:"alert"},"Dyskwalifikacje / Wycofania"),r.createElement(E,{eventId:a,onRemove:X,referee:I})))))}}}]);
//# sourceMappingURL=736.js.map