"use strict";(self.webpackChunkjavascript=self.webpackChunkjavascript||[]).push([[838],{9838:function(e,t,n){n.r(t),n.d(t,{default:function(){return Pe}});var a=n(7294),r=n(9669),l=n.n(r),c=n(6974),i=n(9942),o=n(5005),s=n(1881),u=n(5147),d=n(6025),m=n(7577),f=n(8678),v=n(9198),p=n(9546),y=n(7625),g=n(1436),h=n(6668),E=n(9952),b=n(7091),w=n(7648);function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){k(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,l=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(a=n.next()).done)&&(l.push(a.value),!t||l.length!==t);c=!0);}catch(e){i=!0,r=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw r}}return l}}(e,t)||j(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){if(e){if("string"==typeof e)return z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z(e,t):void 0}}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var S=function(e){var t=e.show,n=e.handleClose,r=e.event,c=x((0,a.useState)({name:"",description:"",date:new Date,signDeadline:new Date,admin:1,stages:[],organizer:"",logoPath:"",awdClassification:!1,rwdClassification:!1,fwdClassification:!1}),2),C=c[0],S=c[1],I=x((0,a.useState)({index:0,name:"",distance:1.5,startTime:new Date,startFrequency:1}),2),Z=I[0],O=I[1],D=x((0,a.useState)({carClassId:0,carClassName:null,maxEngineCapacity:null,eventId:null==r?void 0:r.eventId,awd:!1}),2),A=D[0],P=D[1],F=x((0,a.useState)([]),2),T=F[0],H=F[1],K=x((0,a.useState)({eventId:null==r?void 0:r.eventId,path:"",description:""}),2),B=K[0],M=K[1],L=x((0,a.useState)([]),2),Y=L[0],U=L[1],G=x((0,a.useState)({eventId:null==r?void 0:r.eventId,file:"",fileName:"",description:""}),2),W=G[0],q=G[1],R=x((0,a.useState)(),2),$=R[0],J=R[1],Q=x((0,a.useState)([]),2),V=Q[0],_=Q[1],X=x((0,a.useState)([]),2),ee=X[0],te=X[1],ne=x((0,a.useState)([]),2),ae=ne[0],re=ne[1],le=x((0,a.useState)([]),2),ce=le[0],ie=le[1],oe=x((0,a.useState)([]),2),se=oe[0],ue=oe[1],de=x((0,a.useState)(!1),2),me=de[0],fe=de[1];(0,a.useEffect)((function(){t&&(l().get("".concat((0,i.AC)(),"/event/getRefereeOptions"),{headers:(0,E.Z)()}).then((function(e){re(e.data)})),l().get("".concat((0,i.AC)(),"/event/getEventClassesOptions"),{headers:(0,E.Z)()}).then((function(e){ue(e.data)})),ie([]),te([]),_([]),void 0!==r&&ye())}),[t]);var ve=function(e){S(N(N({},C),{},k({},e.target.name,e.target.value)))},pe=function(e){O(N(N({},Z),{},k({},e.target.name,e.target.value)))},ye=function(){l().get("".concat((0,i.AC)(),"/event/getEvent?eventId=").concat(r.eventId)).then((function(e){S(N(N({},e.data),{},{date:e.data.date?new Date(e.data.date):new Date,signDeadline:e.data.signDeadline?new Date(e.data.signDeadline):new Date})),_(e.data.stages.map((function(e){return N(N({},e),{},{startTime:new Date(e.startTime)})}))),te(e.data.referee),ie(e.data.eventClasses.map((function(e){return N(N({},e),{},{carClassName:e.carClass.name})}))),H(e.data.eventPaths),U(e.data.eventFiles)}))},ge=function(e){var t=e.className,n=e.children;return a.createElement(a.Fragment,null,a.createElement(v.CalendarContainer,{className:t},a.createElement("div",{style:{display:"flex"}},n)))};return a.createElement(s.Z,{show:t,onHide:n,backdrop:"static",keyboard:!1,size:"xl"},a.createElement(s.Z.Header,{className:"bg-dark-green text-white",closeButton:!0},a.createElement(s.Z.Title,null,"Dodawanie nowego wydarzenia")),a.createElement(s.Z.Body,null,a.createElement("div",{className:"row u-text-center justify-content-center"},a.createElement(d.Z.Body,{className:"py-0"},a.createElement("div",{className:"row d-flex"},a.createElement("div",{className:"col-lg-4 px-1"},a.createElement(m.K,{label:"Nazwa",name:"name",handleChange:ve,big:!0,value:C.name,multiline:2})),a.createElement("div",{className:"col-lg-8 px-1"},a.createElement(m.K,{label:"Opis",name:"description",handleChange:ve,big:!0,value:C.description,multiline:2}))),a.createElement("div",{className:"row d-flex"},a.createElement("div",{className:"col-lg-3 px-1"},a.createElement(m.K,{label:"Nazwa organizatora",name:"organizer",handleChange:ve,big:!0,value:C.organizer})),a.createElement("div",{className:"col-lg-3 px-1"},a.createElement(m.K,{label:"Ścieżka do logo wydarzenia",inputPlaceholder:"http://www.akteam.pl/logo.jpg",name:"logoPath",handleChange:ve,big:!0,value:C.logoPath})),a.createElement("div",{className:"col-lg-3 px-1"},a.createElement(f.z4,{label:"Data wydarzenia",onChange:function(e){return S(N(N({},C),{},{date:e}))},selected:C.date,calendarContainer:ge,minDate:null,maxDate:null})),a.createElement("div",{className:"col-lg-3 px-1"},a.createElement(f.z4,{label:"Koniec zapisów",onChange:function(e){return S(N(N({},C),{},{signDeadline:e}))},selected:C.signDeadline,calendarContainer:ge,minDate:new Date,maxDate:null})))),a.createElement("div",{className:"col-lg-4 py-2  border-right shadow bg-white rounded"},a.createElement("div",{className:"col-lg-12 border-right rounded"},a.createElement(d.Z,{className:"text-center"},a.createElement(d.Z.Body,{className:"p-0"},a.createElement(h.Q,{label:"Sędziowie",options:ae,handleChange:function(e){return n=e,a=ae.find((function(e){return e.value===n})),r={userId:Number(a.value),username:a.label},void te([].concat((t=ee,function(e){if(Array.isArray(e))return z(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||j(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[r]));var t,n,a,r},isValid:!0,skipDefault:!0}),a.createElement(u.Z,{responsive:!0},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,"Login"),a.createElement("th",{className:"text-end"},"Usuń"))),a.createElement("tbody",null,ee.map((function(e,t){return a.createElement("tr",{key:e.userId+t},a.createElement("td",null,e.username),a.createElement("td",{className:"text-end"},a.createElement(y.G,{icon:g.nYk,onClick:function(){return t=e.userId,n=ee.filter((function(e){return e.userId!==t})),void te(n);var t,n},title:"Usuń załoge",cursor:"pointer"})))})))))),a.createElement(d.Z,{className:"text-center"},a.createElement(d.Z.Header,{className:"bg-dark-green text-white"},"Podział na klasy"),a.createElement(d.Z.Body,{className:"p-0"},a.createElement(u.Z,{responsive:!0},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,"Klasa"),a.createElement("th",null,"Max silnik [cm3]"),a.createElement("th",{className:"text-end"},"Usuń"))),a.createElement("tbody",null,ce.map((function(e,t){return a.createElement("tr",{key:e.carClassId+t},a.createElement("td",null,e.carClassName),a.createElement("td",null,e.maxEngineCapacity),a.createElement("td",{className:"text-end"},a.createElement(y.G,{icon:g.nYk,onClick:function(){return t=e.carClassId,n=ce.filter((function(e){return e.carClassId!==t})),void ie(n);var t,n},title:"Usuń klase",cursor:"pointer"})))})))),a.createElement("div",{className:"d-grid"},a.createElement(h.Q,{className:"w-50",label:"Klasa",options:se,handleChange:function(e){return t=e,n=se.find((function(e){return e.value===t})),void P(N(N({},A),{},{carClassId:t,carClassName:n.label}));var t,n},isValid:!0,value:A.carClassId,skipDefault:!0}),a.createElement(m.K,{label:"Max silnik [cm3]",name:"name",handleChange:function(e){return P(N(N({},A),{},{maxEngineCapacity:e.target.value}))},big:!0,value:A.maxEngineCapacity})),a.createElement(o.Z,{className:"px-4 my-3",variant:"success",onClick:function(){ce.push(A),P({carClassId:0,carClassName:null,maxEngineCapacity:"",eventId:null==r?void 0:r.eventId,awd:!1})}},"Dodaj klase"),a.createElement(w.Z.Check,{inline:!0,label:"Dodatkowa klasyfikacja AWD",name:"turbo",type:"checkbox",checked:C.awdClassification,onClick:function(e){return S(N(N({},C),{},{awdClassification:e.target.checked}))}}),a.createElement(w.Z.Check,{inline:!0,label:"Dodatkowa klasyfikacja RWD",name:"turbo",type:"checkbox",checked:C.rwdClassification,onClick:function(e){return S(N(N({},C),{},{rwdClassification:e.target.checked}))}}),a.createElement(w.Z.Check,{inline:!0,label:"Dodatkowa klasyfikacja FWD",name:"turbo",type:"checkbox",checked:C.fwdClassification,onClick:function(e){return S(N(N({},C),{},{fwdClassification:e.target.checked}))}}))),a.createElement(d.Z,{className:"text-center"},a.createElement(d.Z.Header,{className:"bg-dark-green text-white"},"Plik z logo wydarzenia"),a.createElement(d.Z.Body,{className:"p-1"},a.createElement("input",{type:"file",name:"logoPathFile",accept:"image/jpg",onChange:function(e){return function(e){var t=e.target.files[0],n=new FormData;n.append("file",t),J(n)}(e)}}))))),a.createElement("div",{className:"col-lg-8 py-2 shadow mb-1 bg-white rounded"},a.createElement(d.Z,null,a.createElement(d.Z.Header,{className:"bg-dark-green text-white"},"Odcinki PS/OS (w kolejności)"),a.createElement(d.Z.Body,{className:"p-0"},V.length>0&&a.createElement(u.Z,{responsive:!0},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,"#"),a.createElement("th",null,"Nazwa"),a.createElement("th",null,"Czas startu"),a.createElement("th",null,"Częstotliwość"),a.createElement("th",{className:"text-end"},"Usuń"))),a.createElement("tbody",null,V.map((function(e,t){return a.createElement("tr",{key:t},a.createElement("td",null,t),a.createElement("td",null,e.name),a.createElement("td",null,null===e.startTime?"":(0,p.default)(e.startTime,"HH:mm")),a.createElement("td",null,e.startFrequency+" min"),a.createElement("td",{className:"text-end"},a.createElement(y.G,{icon:g.nYk,onClick:function(){return t=e.index,n=V.filter((function(e){return e.index!==t})),void _(n);var t,n},title:"Usuń załoge",cursor:"pointer"})))})))),a.createElement("div",{className:"d-block"},a.createElement(m.K,{label:"Nazwa",name:"name",handleChange:pe,big:!0,value:Z.name})),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-lg-3"},a.createElement(m.K,{label:"Długość [m]",name:"distance",handleChange:pe,big:!0,onlyNumber:!0,value:Z.distance})),a.createElement("div",{className:"col-lg-4"},a.createElement(f.jI,{label:"Czas startu odcinka",onChange:function(e){O(N(N({},Z),{},{startTime:e}))},calendarContainer:ge,minDate:new Date,maxDate:null})),a.createElement("div",{className:"col-lg-5"},a.createElement(m.K,{label:"Częstotliwość startów [min]",name:"startFrequency",handleChange:pe,big:!0,value:Z.startFrequency}))),a.createElement("div",{className:"text-center py-3"},a.createElement(o.Z,{className:"px-4 mx-3",variant:"success",onClick:function(){V.push(Z),_(V),O({index:Z.index+1,name:"",distance:"",startTime:new Date,startFrequency:1})}},"Dodaj odcinek")))),a.createElement(d.Z,{className:"text-center"},a.createElement(d.Z.Header,{className:"bg-dark-green text-white"},"Linki do regulaminow, informacji itd."),a.createElement(d.Z.Body,{className:"p-0"},a.createElement(u.Z,{responsive:!0},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,"Link"),a.createElement("th",null,"Opis"),a.createElement("th",{className:"text-end"},"Usuń"))),a.createElement("tbody",null,T.map((function(e,t){return a.createElement("tr",{key:t},a.createElement("td",null,e.path),a.createElement("td",null,e.description),a.createElement("td",{className:"text-end"},a.createElement(y.G,{icon:g.nYk,onClick:function(){return H(T.filter((function(t){return t.path!==e.path})))},title:"Usuń link",cursor:"pointer"})))})))),a.createElement("div",{className:"d-grid"},a.createElement(m.K,{label:"Link/ścieżka",name:"path",handleChange:function(e){return M(N(N({},B),{},{path:e.target.value}))},big:!0,value:B.path}),a.createElement(m.K,{label:"Opis",name:"description",handleChange:function(e){return M(N(N({},B),{},{description:e.target.value}))},big:!0,value:B.description})),a.createElement(o.Z,{className:"px-4 my-3",variant:"success",onClick:function(){T.push(B),M({eventId:null==r?void 0:r.eventId,path:"",description:""})},disabled:""===B.description||""===B.link},"Dodaj link"))),a.createElement(d.Z,{className:"text-center"},a.createElement(d.Z.Header,{className:"bg-dark-green text-white"},"Pliki"),a.createElement(d.Z.Body,{className:"p-0"},a.createElement(u.Z,{responsive:!0},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,"Plik"),a.createElement("th",null,"Opis"),a.createElement("th",{className:"text-end"},"Usuń"))),a.createElement("tbody",null,Y.map((function(e,t){return a.createElement("tr",{key:t},a.createElement("td",null,e.fileName),a.createElement("td",null,e.description),a.createElement("td",{className:"text-end"},a.createElement(y.G,{icon:g.nYk,onClick:function(){var t;(t=e.id)&&l().post("".concat((0,i.AC)(),"/event/removeFileFromEvent?fileId=").concat(t,"&eventId=").concat(C.eventId),{headers:(0,E.Z)()}),U(Y.filter((function(t){return t.fileName!==e.fileName})))},title:"Usuń plik",cursor:"pointer"})))})))),a.createElement("div",{className:"d-grid"},a.createElement("input",{type:"file",name:"file",accept:"application/pdf,application/vnd.ms-excel",onChange:function(e){return function(e){var t=e.target.files[0],n=new FormData;n.append("file",t),q(N(N({},W),{},{file:n,fileName:t.name}))}(e)}}),a.createElement(m.K,{label:"Opis",name:"description",handleChange:function(e){return q(N(N({},W),{},{description:e.target.value}))},big:!0,value:W.description})),a.createElement(o.Z,{className:"px-4 my-3",variant:"success",onClick:function(){Y.push(W),q({eventId:null==r?void 0:r.eventId,file:"",fileName:"",description:""})},disabled:""===W.description||""===W.fileName},"Dodaj plik"))))),me&&a.createElement(b.m,{show:!0,title:"Usuwanie wydarzenia",text:"Czy napewno chcesz usunąć wydarzenie? Operacja nieodwracalna",handleAccept:function(){l().get("".concat((0,i.AC)(),"/event/deleteEvent?eventId=").concat(r.eventId),{headers:(0,E.Z)()}).then((function(e){n()})),fe(!1)},handleClose:function(){return fe(!1)}})),a.createElement(s.Z.Footer,{className:"justify-content-center"},r&&a.createElement(o.Z,{className:"mx-3",variant:"secondary",onClick:function(){return fe(!0)}},"Usuń wydarzenie"),a.createElement(o.Z,{className:"mx-3",variant:"secondary",onClick:n},"Anuluj"),a.createElement(o.Z,{className:"px-4 mx-3",variant:"success",onClick:function(){var e=N(N({},C),{},{stages:V,referee:ee,eventClasses:ce,eventPaths:T,eventFiles:[]});l().put("".concat((0,i.AC)(),"/event/createNew"),e).then((function(e){Y.forEach((function(t){return l().post("".concat((0,i.AC)(),"/event/addFileToEvent?fileName=").concat(t.fileName,"&desc=").concat(t.description,"&eventId=").concat(e.data),t.file,{headers:(0,E.Z)()})})),$&&l().post("".concat((0,i.AC)(),"/event/addLogoFile?eventId=").concat(e.data),$,{headers:(0,E.Z)()})})),n()},disabled:0===V.length},"OK")))},I=n(381),Z=n.n(I),O=n(7977),D=function(e){var t=e.count,n=e.lPos,r=void 0===n?"-3vh":n,l=e.bg,c=void 0===l?"secondary":l,i=e.title,o=void 0===i?"":i;return a.createElement("div",{"data-bs-toggle":"tooltip",title:o,className:"user-select-none position-relative",style:{left:r,top:"-15px"}},t>0&&a.createElement(a.Fragment,null,a.createElement(O.Z,{className:"position-absolute",pill:!0,bg:c},t)))};function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,l=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(a=n.next()).done)&&(l.push(a.value),!t||l.length!==t);c=!0);}catch(e){i=!0,r=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw r}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return P(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?P(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var F=function(e){var t=e.event,n=e.onJoin,r=e.onTeamList,l=e.onScore,c=e.onEdit,s=e.onStatement,u=e.mainAdmin,m=(new Date).getTime()>new Date(t.signDeadline).getTime(),f=A((0,a.useState)(0),2),v=f[0],p=f[1],h=A((0,a.useState)(0),2),E=h[0],b=h[1],w=Z()(null==t?void 0:t.signDeadline).diff(new Date,"days"),C=Z()(null==t?void 0:t.date).diff(new Date,"days"),N=function(e){return 0===e?"DZISIAJ!":1===e?"za "+e+" dzień":"za "+e+" dni"};return(0,a.useEffect)((function(){t&&((0,i.wO)(t.eventId,(function(e){return p(e.length)})),(0,i.KP)(t.eventId,(function(e){return b(e)})))}),[]),a.createElement("div",{className:"col-lg-6 py-1 px-1 no-opacity-hover opacity-90a"},a.createElement(d.Z,{className:"shadow-sm"},a.createElement(d.Z.Header,{className:"bg-secondary-green text-white text-start fw-bold py-1"},a.createElement("div",{className:"row px-1"},a.createElement("div",{className:"col-11 px-0"},null==t?void 0:t.name),a.createElement("div",{className:"col-1 px-0 text-end"},void 0!==c&&u&&a.createElement(y.G,{className:"text-white fa-lg",icon:g.Xcf,onClick:c,cursor:"pointer"})))),a.createElement(d.Z.Body,{className:"p-1"},a.createElement("div",{style:{whiteSpace:"break-spaces"},className:"position-absolute end-0 mx-1 badge bg-primary-green text-wrap fst-italic"},"".concat(Z()(null==t?void 0:t.date).format("dddd, DD MMM YYYY, HH:mm"),"\n            ").concat(C>=0?"("+N(C)+")":"")),a.createElement("div",{className:"container d-flex"},a.createElement("div",{className:"col-lg-4 px-0 align-self-center",style:{width:"200px",maxHeight:"150px",display:"flex"}},t.logoPathFile?a.createElement("img",{id:"eventImage"+t.eventId,className:"img-fluid rounded float-left",style:{objectFit:"contain"},src:"data:image/jpg;base64,"+t.logoPathFile,alt:"Logo"}):void 0!==t.logoPath&&null!==t.logoPath?a.createElement("img",{className:"img-fluid rounded float-left",style:{objectFit:"contain"},src:t.logoPath,alt:"Logo"}):a.createElement("img",{src:"/akbpLogo.png",style:{objectFit:"contain"},className:"img-fluid rounded float-left",alt:"..."})),a.createElement("div",{className:"col-lg-8 mt-3"},void 0!==t.organizer&&null!==t.organizer&&a.createElement("h6",{className:"m-3 "},"Organizator: ".concat(t.organizer)),new Date(null==t?void 0:t.signDeadline)>=new Date&&a.createElement(a.Fragment,null,a.createElement("h6",{style:{whiteSpace:"break-spaces"},className:"font13 fw-bold fst-italic mt-2"},"Koniec zapisów ".concat(N(w),"\n").concat(Z()(null==t?void 0:t.signDeadline).format("dddd, DD MMM YYYY, HH:mm")))),new Date(null==t?void 0:t.signDeadline)<new Date&&a.createElement("p",{className:"fw-bold fst-italic mt-2"},"Zapisy zamknięte"),t.joined&&a.createElement("div",{className:"d-inline-flex"},a.createElement(y.G,{className:"text-success fa-lg",icon:g.Tab}),a.createElement("h6",null,"Jesteś zapisany"))))),a.createElement(d.Z.Footer,{className:"text-start py-0 px-1"},a.createElement("div",{className:"row my-2 mx-0"},a.createElement("div",{className:"col-6 px-0"},a.createElement(o.Z,{className:"start-0 py-1 px-1 ",variant:"success",onClick:n},m?"Informacje":t.joined?"Moje zgłoszenie":"Info / Zgłoszenia")),a.createElement("div",{className:"col-6 px-0 d-flex justify-content-end"},a.createElement(o.Z,{className:"py-1 px-2 mx-1",variant:"dark",onClick:r},"Lista"),a.createElement(D,{count:E,lPos:"-3.5vh",bg:"primary",title:"Liczba zapisanych"}),a.createElement(o.Z,{className:"py-1 px-1 mx-1",variant:"warning",onClick:s},"Komunikaty"),a.createElement(D,{count:v,title:"Liczba komunikatów"}),a.createElement(o.Z,{className:"py-1 px-1 mx-1",variant:"success",onClick:l},"Wyniki"))))))},T=n(6968),H=n(496),K=n(3992),B=n(9661);function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,l=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(a=n.next()).done)&&(l.push(a.value),!t||l.length!==t);c=!0);}catch(e){i=!0,r=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw r}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return L(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?L(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var Y=function(e){var t=e.show,n=e.handleClose,r=e.eventId,c=(e.started,M((0,a.useState)([]),2)),u=c[0],d=c[1],m=M((0,a.useState)(!1),2),f=(m[0],m[1],M((0,a.useState)(!0),2)),v=f[0],p=f[1],h=M((0,a.useState)(!1),2),E=h[0],b=(h[1],function(){void 0!==r&&l().get("".concat((0,i.AC)(),"/event/getTeams?eventId=").concat(r)).then((function(e){d(e.data),p(!1)}))});(0,a.useEffect)((function(){t&&(p(!0),d([])),b()}),[t]),(0,a.useEffect)((function(){d([]),b()}),[E]);var w=(0,a.useMemo)((function(){return[{width:"8%",id:"index",Header:"L.p",accessor:function(e){return e.number},disableFilters:!0,Cell:function(e){return a.createElement("div",{className:"ps-2"}," ",e.row.index+1)}},{width:"9%",id:"#",Header:"#Nr",accessor:function(e){return e.number},disableFilters:!0,Cell:function(e){return a.createElement(K.M,{value:e.value})}},{width:"30%",id:"team",Header:"Załoga",accessor:function(e){return e.team},disableFilters:!0,Cell:function(e){return a.createElement(B.Ur,{team:e.value})}},{width:"30%",id:"car",Header:"Samochód",accessor:function(e){return e.team.currentCar},disableFilters:!0,Cell:function(e){var t,n,r,l;return a.createElement(B.He,{line1:((null===(t=e.value)||void 0===t?void 0:t.brand)||"")+" "+((null===(n=e.value)||void 0===n?void 0:n.model)||""),line2:e.row.original.carClass.name,carBrand:null===(r=e.value)||void 0===r?void 0:r.brand,driveType:null===(l=e.value)||void 0===l?void 0:l.driveTypeEnum})}},{width:"11%",id:"engine",Header:"Silnik",accessor:function(e){var t;return(null===(t=e.team.currentCar)||void 0===t?void 0:t.engineCapacity)+" cm3"},disableFilters:!0},{width:"11%",id:"entryFee",Header:"Potwierdz.",accessor:function(e){return e.entryFeePaid},disableFilters:!0,Cell:function(e){return a.createElement(y.G,{icon:e.value?g.LEp:g.Psp,style:{color:e.value?"green":"black"},title:e.value?"Potwierdzony":"Dodaj potwierdzenie przelewu",cursor:"pointer"})}}]}),[]);return a.createElement(s.Z,{show:t,onHide:n,backdrop:"static",keyboard:!1,size:"xl"},a.createElement(s.Z.Header,{className:"bg-dark-green text-white",closeButton:!0},a.createElement(s.Z.Title,null,"Lista zapisanych")),a.createElement(s.Z.Body,{className:"px-0"},v&&a.createElement("div",{className:"text-center"},a.createElement(T.Z,{animation:"border",variant:"secondary",size:"lg"})),!v&&0===u.length&&a.createElement("h2",{className:"text-center"},"Brak zgłoszeń - bądź pierwszy!"),!v&&(null==u?void 0:u.length)>0&&a.createElement(H.Z,{columns:w,data:u,isLoading:!1,isFooter:!1,isHeader:!0,manualPagination:!0})),a.createElement(s.Z.Footer,{className:"justify-content-center"},a.createElement("div",{className:"d-grid"},a.createElement(o.Z,{className:"m-1",variant:"secondary",onClick:n},"Anuluj"))))},U=n(5509),G=n(7905);function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){R(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,l=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(a=n.next()).done)&&(l.push(a.value),!t||l.length!==t);c=!0);}catch(e){i=!0,r=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw r}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return J(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?J(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var Q=function(e){var t=e.show,n=e.handleClose,r=e.eventId,c=$((0,a.useState)(),2),u=c[0],d=c[1],f=$((0,a.useState)(!1),2),v=f[0],p=f[1],y=$((0,a.useState)(),2),b=y[0],C=y[1],N=$((0,a.useState)({coSportLicense:!1,sportLicense:!1,birthDate:new Date,currentCar:{carId:null,brand:"",model:"",year:"",licensePlate:"",vin:"",engineCapacity:"",turbo:!1,driveType:"1",petrol:"BENZYNA",insurance:"",insuranceExpiryDate:new Date,carInspectionExpiryDate:new Date}}),2),k=N[0],x=N[1];return(0,a.useEffect)((function(){t&&(l().get("".concat((0,i.AC)(),"/team/getTeamOptionList")).then((function(e){C(e.data)})),x({coSportLicense:!1,sportLicense:!1,birthDate:new Date,currentCar:{carId:null,brand:"",model:"",year:"",licensePlate:"",vin:"",engineCapacity:"",turbo:!1,driveType:"1",petrol:"BENZYNA",insurance:"",insuranceExpiryDate:new Date,carInspectionExpiryDate:new Date}}),d(),p(!1))}),[t]),a.createElement(s.Z,{show:t,onHide:n,backdrop:"static",keyboard:!1,size:"l"},a.createElement(s.Z.Header,{className:"bg-dark-green text-white",closeButton:!0},a.createElement(s.Z.Title,null,"Szybkie dodawanie zawodnika")),a.createElement(s.Z.Body,null,a.createElement("div",{className:"d-flex justify-content-center text-center"},a.createElement("form",{onSubmit:function(e){e.preventDefault(),p(!0),l().post("".concat((0,i.AC)(),"/team/addTeam?eventId=").concat(r),k,{headers:(0,E.Z)()}).then((function(e){d(e.data),p(!1)}))}},a.createElement("div",{className:"row d-flex"},a.createElement("div",{className:"col-lg-6"},a.createElement(m.K,{label:"Imie i nazwisko kierowcy",name:"driver",handleChange:function(e){return x(q(q({},k),{},{driver:e.target.value}))},value:k.driver,big:!0,required:!0,icon:g.KCX})),a.createElement("div",{className:"col-lg-6"},a.createElement(m.K,{label:"Imie i nazwisko pilota",name:"coDriver",handleChange:function(e){return x(q(q({},k),{},{coDriver:e.target.value}))},value:k.coDriver,big:!0,icon:g.hnx}))),a.createElement("div",{className:"row d-flex"},a.createElement("div",{className:"col-lg-6"},a.createElement(m.K,{label:"Automobilklub kierowcy",name:"club",handleChange:function(e){return x(q(q({},k),{},{club:e.target.value}))},value:k.club,big:!0,icon:g.P88})),a.createElement("div",{className:"col-lg-6"},a.createElement(m.K,{label:"Automobilklub pilota",name:"coClub",handleChange:function(e){return x(q(q({},k),{},{coClub:e.target.value}))},value:k.coClub,big:!0,icon:g.P88}))),a.createElement("div",{className:"row d-flex"},a.createElement("div",{className:"col-lg-6"},a.createElement(m.K,{label:"Marka samochodu",name:"carBrand",handleChange:function(e){return x(q(q({},k),{},{currentCar:q(q({},k.currentCar),{},{brand:e.target.value})}))},value:k.currentCar.brand,big:!0,required:!0,icon:g.yn$})),a.createElement("div",{className:"col-lg-6"},a.createElement(m.K,{label:"Model samochodu",name:"carModel",handleChange:function(e){return x(q(q({},k),{},{currentCar:q(q({},k.currentCar),{},{model:e.target.value})}))},value:k.currentCar.model,big:!0,required:!0,icon:g.kQy}))),a.createElement("div",{className:"row d-flex"},a.createElement("div",{className:"col-lg-6"},a.createElement(m.K,{label:"Pojemność silnika [cm3]",name:"engineCapacity",handleChange:function(e){return x(q(q({},k),{},{currentCar:q(q({},k.currentCar),{},{engineCapacity:e.target.value})}))},value:k.currentCar.engineCapacity,big:!0,required:!0,onlyNumber:!0})),a.createElement("div",{className:"col-lg-6"},a.createElement(h.Q,{label:"Rodzaj napędu",options:null==b?void 0:b.driveTypeOption,handleChange:function(e){return x(q(q({},k),{},{currentCar:q(q({},k.currentCar),{},{driveType:e})}))},isValid:!0}))),a.createElement("div",{className:"d-flex justify-content-center"},a.createElement(w.Z,null,a.createElement("span",{className:"py-0 mb-2 mt-1 mx-1 input-group-text"},"Turbo"),a.createElement(w.Z.Check,{inline:!0,label:"TAK",name:"turbo",type:"radio",id:"inline-1",checked:k.currentCar.turbo,onClick:function(){return x(q(q({},k),{},{currentCar:q(q({},k.currentCar),{},{turbo:!0})}))}}),a.createElement(w.Z.Check,{inline:!0,label:"NIE",name:"turbo",type:"radio",id:"inline-2",checked:!k.currentCar.turbo,onClick:function(){return x(q(q({},k),{},{currentCar:q(q({},k.currentCar),{},{turbo:!1})}))}}))),a.createElement("div",{className:"text-center",style:{height:"50px"}},a.createElement("h4",{className:"text-success fw-bold"},u),v&&a.createElement(T.Z,{animation:"border",variant:"secondary",size:"lg"})),a.createElement(o.Z,{className:"m-1",variant:"success",type:"submit",disabled:u},"Dołącz do wydarzenia"),a.createElement(o.Z,{className:"m-1",variant:"secondary",onClick:function(){return n()}},u?"Ok":"Wyjdź")))))},V=n(3094),_=n(4010);function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){te(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,l=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(a=n.next()).done)&&(l.push(a.value),!t||l.length!==t);c=!0);}catch(e){i=!0,r=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw r}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ae(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ae(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var re=function(e){var t,n,r=e.show,u=e.handleClose,m=e.event,f=(0,c.s0)(),v=ne((0,a.useState)(void 0),2),p=v[0],h=v[1],b=ne((0,a.useState)(),2),w=b[0],C=b[1],N=ne((0,a.useState)(!1),2),k=N[0],x=N[1],j=ne((0,a.useState)(),2),z=j[0],S=j[1],I=ne((0,a.useState)(!1),2),O=I[0],D=I[1],A=ne((0,a.useState)(),2),P=A[0],F=A[1],H=ne((0,a.useState)(),2),K=H[0],B=H[1],M=ne((0,a.useState)(1),2),L=M[0],Y=M[1],W=ne((0,a.useState)(),2),q=W[0],R=W[1],$=null!==sessionStorage.getItem("username");(0,a.useEffect)((function(){r&&(X(),x(!1),S(),D(!1),F(m))}),[r]);var J=!!m&&(new Date).getTime()>new Date(m.signDeadline).getTime(),X=function(){l().get("".concat((0,i.AC)(),"/team/getTeam"),{headers:(0,E.Z)()}).then((function(e){D(""===e.data),""!==e.data&&h(e.data)}))};return(0,a.useEffect)((function(){void 0!==(null==m?void 0:m.eventId)&&void 0!==(null==p?void 0:p.teamId)&&l().get("".concat((0,i.AC)(),"/event/getEntryFeeFile?eventId=").concat(m.eventId,"&teamId=").concat(p.teamId)).then((function(e){204===e.status?D(!0):S("Mamy już Twoje potwierdzenie")})).catch((function(e){S()}))}),[p]),a.createElement("div",null,a.createElement(s.Z,{style:{zIndex:K||q?1e3:1055},show:r,onHide:u,backdrop:"static",keyboard:!1,size:"xl"},a.createElement(s.Z.Header,{className:"bg-dark-green text-white",closeButton:!0},a.createElement(s.Z.Title,{className:"w-100 row"},a.createElement("div",{className:"col-lg-8"},"Informacje o wydarzeniu"),(null==P?void 0:P.joined)&&a.createElement("div",{className:"col-lg-4"},a.createElement(y.G,{className:"text-success fa-lg",icon:g.Tab}),"Jesteś zapisany"))),a.createElement(U.Z,{activeKey:L,onSelect:function(e){return Y(e)},className:"m-0 fw-bold text-dark"},a.createElement(G.Z,{eventKey:1,title:"Informacje"},a.createElement("div",{className:"row text-center px-2"},a.createElement("div",{className:"col-lg-7 px-0"},a.createElement("h3",null,(null==m?void 0:m.name)||""),a.createElement("h6",null,"Data wydarzenia:  "),a.createElement("h6",{className:"fw-bold"},Z()(null==m?void 0:m.date).format(" dddd, DD MMM YYYY, HH:mm")),a.createElement("div",{className:"col-lg-10"},a.createElement("p",{className:"fw-bold fst-italic m-2"},"Koniec zapisów:  ".concat(Z()(null==m?void 0:m.signDeadline).format("dddd, DD MMM YYYY, HH:mm")))),a.createElement("p",{style:{whiteSpace:"pre-line"},className:"m-1"},(null==m?void 0:m.description)||"")),a.createElement("div",{className:"col-lg-5 py-1  align-items-center d-flex"},null!=m&&m.logoPathFile?a.createElement("img",{id:"eventImage"+m.eventId,style:{maxHeight:"450px"},className:"pt-2 img-fluid rounded float-left",src:"data:image/jpg;base64,"+m.logoPathFile,alt:"Logo"}):void 0!==(null==m?void 0:m.logoPath)&&null!==(null==m?void 0:m.logoPath)&&a.createElement("div",{className:""},a.createElement("img",{style:{maxHeight:"450px",position:"relative",top:"30%"},className:"img-fluid rounded float-left",src:m.logoPath,alt:"Logo"})))),a.createElement(d.Z,{className:"text-center"},a.createElement(d.Z.Header,{className:"bg-dark-green text-white"},"Do pobrania:"),a.createElement(d.Z.Body,null,a.createElement("div",{className:"row "},a.createElement("div",{className:"col-lg-12 px-0"},null==m||null===(t=m.eventPaths)||void 0===t?void 0:t.map((function(e,t){return a.createElement("h6",{key:t,className:"my-1"},a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:e.path.startsWith("http")?e.path:"http://"+e.path},e.description))})),null==m||null===(n=m.eventFiles)||void 0===n?void 0:n.map((function(e,t){return a.createElement("h6",{key:t,className:"my-1"},a.createElement("a",{href:"www",onClick:function(t){return function(e,t){e.preventDefault(),(0,_.LR)("".concat((0,i.AC)(),"/event/getEventFile?id=").concat(t.id),t.fileName)}(t,e)}},e.description))}))))))),$?a.createElement(G.Z,{eventKey:2,title:"Wpisowe"},a.createElement("div",{className:"row mx-2 justify-content-center"},a.createElement("div",{className:"col-lg-6 pb-3 px-1"},a.createElement("h5",{className:"text-center py-4"},"Tutaj możesz dodać plik z potwierdzeniem wpisowego, przyspieszy to proces odbioru administracyjnego"),a.createElement(d.Z,{className:"text-center "},a.createElement(d.Z.Header,{className:"bg-dark-green text-white"},"Wpisowe"),a.createElement(d.Z.Body,null,O?a.createElement("p",null,"Zapisz się a następnie będziesz miał możliwość przesłania pliku"):a.createElement("p",null,"Dodaj plik z potwierdzeniem opłacenia wpisowego"),a.createElement("input",{disabled:O,type:"file",name:"file",accept:"application/pdf,application/vnd.ms-excel",onChange:function(e){return C(e.target.files[0])}}),z&&a.createElement("p",{className:"fw-bold m-2"},z),a.createElement("div",null,k?a.createElement(T.Z,{animation:"border",variant:"secondary"}):a.createElement(o.Z,{className:"mt-2 mb-0",variant:"secondary",onClick:function(){return function(e,t){if(w.size>2097152)S("Plik jest zbyt duży (maksymalnie 2mb)");else{x(!0);var n=new FormData;n.append("file",w),l().post("".concat((0,i.AC)(),"/event/addEntryFeeFile?eventId=").concat(e,"&teamId=").concat(t),n,{headers:(0,E.Z)()}).then((function(e){x(!1),e.data?S("Plik został dodany"):S("Plik NIE został dodany - błąd")}))}}(m.eventId,p.teamId)},disabled:void 0===w},"Wyślij plik"))))))):a.createElement(a.Fragment,null)),a.createElement(s.Z.Footer,null,a.createElement("div",{className:"row justify-content-center"},a.createElement("div",{className:"col-xl-12 d-flex"},a.createElement("div",{className:""},a.createElement(o.Z,{className:"m-1",variant:"success",form:"teamForm",onClick:function(){$?R(!0):f("login?".concat(m.eventId))},disabled:J&&O},O?"Zapisz się":"Edytuj dane")),a.createElement("div",{className:""},a.createElement(o.Z,{className:"m-1",variant:"secondary",onClick:u},"Zamknij okno"),(null==P?void 0:P.joined)&&a.createElement(o.Z,{className:"mx-3",variant:"danger",onClick:function(){(0,i.yd)(m.eventId,null==p?void 0:p.teamId,(function(){F(ee(ee({},P),{},{joined:!1})),D(!0)}))},disabled:J},"Wypisz się")))))),a.createElement(Q,{show:K,handleClose:function(){return B()},eventId:null==m?void 0:m.eventId}),a.createElement(V.o,{show:q,handleClose:function(){return R()},handleOk:function(){return u()},myEvent:m}))},le=n(8261);function ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(n),!0).forEach((function(t){oe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function se(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,l=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(a=n.next()).done)&&(l.push(a.value),!t||l.length!==t);c=!0);}catch(e){i=!0,r=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw r}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ue(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ue(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var de=function(e){var t,n,r,c,u,d,f=e.show,v=e.myTeam,p=(e.eventId,e.onSave),y=e.okBtnLabel,E=e.handleClose,b=e.title,C=se((0,a.useState)(!1),2),N=C[0],k=C[1],x=se((0,a.useState)(),2),j=x[0],z=x[1],S=se((0,a.useState)(v),2),I=S[0],Z=S[1];return(0,a.useEffect)((function(){f&&(l().get("".concat((0,i.AC)(),"/team/getTeamOptionList")).then((function(e){z(e.data)})),k(!1))}),[f]),a.createElement(s.Z,{show:f,onHide:E,backdrop:"static",keyboard:!1,size:"l"},a.createElement(s.Z.Header,{closeButton:!0,className:"bg-dark-green text-white"},a.createElement(s.Z.Title,{className:"text-white"},b)),a.createElement(s.Z.Body,null,a.createElement("div",{className:"d-flex justify-content-center text-center"},a.createElement("form",{onSubmit:function(e){k(!0),e.preventDefault(),p(I)}},a.createElement("div",{className:"row d-flex"},a.createElement("div",{className:"col-lg-6"},a.createElement(m.K,{label:"Imie i nazwisko kierowcy",name:"driver",handleChange:function(e){return Z(ie(ie({},I),{},{driver:e.target.value}))},value:I.driver,big:!0,required:!0,icon:g.KCX})),a.createElement("div",{className:"col-lg-6"},a.createElement(m.K,{label:"Imie i nazwisko pilota",name:"coDriver",handleChange:function(e){return Z(ie(ie({},I),{},{coDriver:e.target.value}))},value:I.coDriver,big:!0,icon:g.hnx}))),a.createElement("div",{className:"row d-flex"},a.createElement("div",{className:"col-lg-6"},a.createElement(m.K,{label:"Automobilklub kierowcy",name:"club",handleChange:function(e){return Z(ie(ie({},I),{},{club:e.target.value}))},value:I.club,big:!0,icon:g.P88})),a.createElement("div",{className:"col-lg-6"},a.createElement(m.K,{label:"Automobilklub pilota",name:"coClub",handleChange:function(e){return Z(ie(ie({},I),{},{coClub:e.target.value}))},value:I.coClub,big:!0,icon:g.P88}))),a.createElement("div",{className:"row d-flex"},a.createElement("div",{className:"col-lg-12"},a.createElement(m.K,{label:"Nazwa Teamu",name:"teamName",handleChange:function(e){return Z(ie(ie({},I),{},{teamName:e.target.value}))},value:I.teamName,big:!0,icon:g.r$M}))),a.createElement("div",{className:"row d-flex"},a.createElement("div",{className:"col-lg-6"},a.createElement(m.K,{label:"Marka samochodu",name:"carBrand",handleChange:function(e){return Z(ie(ie({},I),{},{currentCar:ie(ie({},I.currentCar),{},{brand:e.target.value})}))},value:null===(t=I.currentCar)||void 0===t?void 0:t.brand,big:!0,required:!0,icon:g.yn$})),a.createElement("div",{className:"col-lg-6"},a.createElement(m.K,{label:"Model samochodu",name:"carModel",handleChange:function(e){return Z(ie(ie({},I),{},{currentCar:ie(ie({},I.currentCar),{},{model:e.target.value})}))},value:null===(n=I.currentCar)||void 0===n?void 0:n.model,big:!0,required:!0,icon:g.kQy}))),a.createElement("div",{className:"row d-flex"},a.createElement("div",{className:"col-lg-6"},a.createElement(m.K,{label:"Pojemność silnika [cm3]",name:"engineCapacity",handleChange:function(e){return Z(ie(ie({},I),{},{currentCar:ie(ie({},I.currentCar),{},{engineCapacity:e.target.value})}))},value:null===(r=I.currentCar)||void 0===r?void 0:r.engineCapacity,big:!0,required:!0,onlyNumber:!0})),a.createElement("div",{className:"col-lg-6"},a.createElement(h.Q,{label:"Rodzaj napędu",options:null==j?void 0:j.driveTypeOption,handleChange:function(e){return Z(ie(ie({},I),{},{currentCar:ie(ie({},I.currentCar),{},{driveType:e})}))},value:null===(c=I.currentCar)||void 0===c?void 0:c.driveType,isValid:!0}))),a.createElement("div",{className:"d-flex justify-content-center"},a.createElement(w.Z,null,a.createElement("span",{className:"py-0 mb-2 mt-1 mx-1 input-group-text"},"Turbo"),a.createElement(w.Z.Check,{inline:!0,label:"TAK",name:"turbo",type:"radio",id:"inline-1",checked:null===(u=I.currentCar)||void 0===u?void 0:u.turbo,onClick:function(){return Z(ie(ie({},I),{},{currentCar:ie(ie({},I.currentCar),{},{turbo:!0})}))}}),a.createElement(w.Z.Check,{inline:!0,label:"NIE",name:"turbo",type:"radio",id:"inline-2",checked:!(null!==(d=I.currentCar)&&void 0!==d&&d.turbo),onClick:function(){return Z(ie(ie({},I),{},{currentCar:ie(ie({},I.currentCar),{},{turbo:!1})}))}}))),a.createElement("div",{className:"text-center",style:{height:"50px"}},N&&a.createElement(T.Z,{animation:"border",variant:"secondary",size:"lg"})),a.createElement(o.Z,{className:"m-1",variant:"success",type:"submit"},y),a.createElement(o.Z,{className:"m-1",variant:"secondary",onClick:function(){return E()}},"Anuluj")))))},me=n(2763);function fe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,l=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(a=n.next()).done)&&(l.push(a.value),!t||l.length!==t);c=!0);}catch(e){i=!0,r=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw r}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ve(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ve(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var pe=function(e){var t=e.show,n=e.handleClose,r=e.eventId,c=fe((0,a.useState)(!1),2),u=c[0],p=c[1],y=fe((0,a.useState)(),2),g=y[0],w=y[1],C=fe((0,a.useState)(),2),N=C[0],k=C[1],x=fe((0,a.useState)(1),2),j=x[0],z=x[1],S=fe((0,a.useState)([]),2),I=S[0],O=S[1],D=fe((0,a.useState)(),2),A=D[0],P=D[1];return(0,a.useEffect)((function(){t&&(p(!1),z(1),l().get("".concat((0,i.AC)(),"/event/getPsOptions?eventId=").concat(r),{headers:(0,E.Z)()}).then((function(e){var t;O(e.data),k(null===(t=e.data[0])||void 0===t?void 0:t.value)})))}),[t]),a.createElement(a.Fragment,null,a.createElement(s.Z,{style:{zIndex:g?1e3:1055},show:t,onHide:n,backdrop:"static",keyboard:!1},a.createElement(s.Z.Header,{closeButton:!0,className:"bg-dark-green text-white"},a.createElement(s.Z.Title,{className:"text-white"},"Lista startowa")),a.createElement(s.Z.Body,null,a.createElement("div",{className:"row text-center"},a.createElement("div",{className:"col-lg-12 pb-3"},a.createElement(d.Z,{className:""},a.createElement(d.Z.Body,null,a.createElement("p",{style:{whiteSpace:"break-spaces"}},"Na liście startowej znajdą się wszyscy zawodnicy którzy NIE otrzymali negatywnego BK i/lub OA oraz \nNIE dostali kary wykluczającej z zawodów (dyskwalifikacja lub wycofanie)\n                    \nNegatywny BK i/lub OA możesz dodać w panelu danych zawodnika.\n                    \nPlik z listą startową zostanie dodany w komunikatach wydarzenia.\n                    "),a.createElement(h.Q,{label:"Odcinek na który dodawana jest lista startowa",options:I,value:N,handleChange:function(e){return k(e)},isValid:!0}),a.createElement(f.jI,{label:"Czas startu odcinka",onChange:function(e){return P(e)},calendarContainer:function(e){var t=e.className,n=e.children;return a.createElement(a.Fragment,null,a.createElement(v.CalendarContainer,{className:t},a.createElement("div",{style:{display:"flex"}},n)))},selected:A}),a.createElement(m.K,{label:"Co ile minut start zawodnika",value:j,handleChange:function(e){return z(e.target.value)},onlyNumber:!0,type:"number",big:!0}))))),a.createElement("div",{className:"text-center"},a.createElement(me.O,{variant:"success",isLoading:u,onClick:function(){p(!0),(0,i.oB)(r,N,Z()(A).format("YYYY-MM-DDTHH:mm:ss.SSS[Z]"),j,(function(e){p(!1),w(e)}))},disabled:!N||!j||!A,msg:"Dodaj listę startową",loadingMsg:"Dodawanie listy startowej"}),a.createElement(o.Z,{className:"m-1",variant:"secondary",onClick:function(){return n()}},"Wróć")))),a.createElement(b.e,{show:void 0!==g,title:"",text:g?"Lista startowa została dodana do komunikatów wydarzenia":"Akcja nieudana",handleAccept:function(){return w()}}))};function ye(){return ye=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ye.apply(this,arguments)}function ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function he(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(n),!0).forEach((function(t){Ee(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function be(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,l=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(a=n.next()).done)&&(l.push(a.value),!t||l.length!==t);c=!0);}catch(e){i=!0,r=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw r}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return we(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?we(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function we(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var Ce=function(e){var t=e.show,n=e.handleClose,r=e.eventId,c=e.eventName,u=(e.started,be((0,a.useState)([]),2)),m=u[0],f=u[1],v=be((0,a.useState)(!1),2),p=v[0],w=v[1],C=be((0,a.useState)(!0),2),N=C[0],k=C[1],x=be((0,a.useState)(!1),2),j=x[0],z=x[1],S=be((0,a.useState)(!1),2),I=S[0],Z=S[1],O=be((0,a.useState)({driver:null,teamId:null}),2),D=O[0],A=O[1],P=be((0,a.useState)({driver:null,teamId:null}),2),F=P[0],H=P[1],K=be((0,a.useState)(),2),M=K[0],L=K[1],Y=be((0,a.useState)([]),2),U=Y[0],G=Y[1],W=be((0,a.useState)(),2),q=W[0],R=W[1],$=be((0,a.useState)(),2),J=$[0],X=$[1],ee=be((0,a.useState)(),2),te=ee[0],ne=ee[1],ae=be((0,a.useState)(!1),2),re=ae[0],ce=ae[1],ie=be((0,a.useState)(!1),2),oe=ie[0],se=ie[1],ue=be((0,a.useState)(!1),2),fe=ue[0],ve=ue[1],ge=be((0,a.useState)(!1),2),Ee=ge[0],we=ge[1];(0,a.useEffect)((function(){t&&(ze(),k(!0),f([]),je()),xe()}),[t]);var Ce=function(){A({driver:null,teamId:null})},Ne=function(){H({driver:null,teamId:null})},ke=function(e){return{teamId:e.teamId,driver:e.driver+" / "+e.coDriver}},xe=function(){void 0!==r&&l().get("".concat((0,i.AC)(),"/event/getTeams?eventId=").concat(r)).then((function(e){f(e.data.sort((function(e,t){return e.order-t.order}))),k(!1)}))},je=function(){l().get("".concat((0,i.AC)(),"/event/getEvent?eventId=").concat(r)).then((function(e){G(e.data.eventClasses.map((function(e){return he(he({},e),{},{value:e.carClassId,label:e.carClass.name})})))}))},ze=function(){l().get("".concat((0,i.AC)(),"/event/checkReferee?eventId=").concat(r),{headers:(0,E.Z)()}).then((function(e){z(e.data)}))},Se=function(e,t){var n=m.findIndex((function(t){return t.id===e}));m[n].carClassId!==t&&(m[n].carClassId=t,f(m))},Ie=function(e,t){var n=m.filter((function(t){return t.id!==e.id}));e.number=t,e.forcedNumber=""!==t,n.push(e),n.sort((function(e,t){return e.order-t.order})),f(Ze(n))},Ze=function(e){var t=[],n=m.filter((function(e){return e.forcedNumber})).map((function(e){return e.number})),a=1;for(var r in e){var l=e[r];if(l.forcedNumber)t.push(l);else{if(l.forcedNumber||n.includes(a)){for(;n.includes(a);)a++;l.number=a++}else l.number=a++;t.push(l)}}return t};return a.createElement(a.Fragment,null,a.createElement(s.Z,{style:{zIndex:q||J||te||Ee?1e3:1055},show:t,onHide:n,backdrop:"static",keyboard:!1,size:"xl"},a.createElement(s.Z.Header,{className:"bg-dark-green text-white",closeButton:!0},a.createElement(s.Z.Title,null,"Lista zapisanych")),a.createElement(s.Z.Body,{className:"pb-0"},N&&a.createElement("div",{className:"text-center"},a.createElement(T.Z,{animation:"border",variant:"secondary",size:"lg"})),!N&&0===m.length&&a.createElement("h1",{className:"text-center"},"Brak zgłoszeń"),!N&&(null==m?void 0:m.length)>0&&a.createElement(a.Fragment,null,a.createElement("table",{style:{minWidth:"600px"}},a.createElement("th",{className:""},a.createElement("td",{style:{width:"70px"}},"Edycja"),a.createElement("td",{style:{width:"60px"}},"Nr"),a.createElement("td",{style:{width:"350px"}},"Kierowca"),a.createElement("td",{style:{width:"350px"}},"Samochód"),a.createElement("td",{style:{width:"100px"}},"Klasa"),a.createElement("td",{style:{width:"100px"}},"Zapłacone"),a.createElement("td",{style:{width:"110px"}},"Potwierdź wpisowe"),a.createElement("td",{style:{width:"100px"}},"Plik"),a.createElement("td",{style:{width:"50px"}},"OA/BK"),a.createElement("td",{style:{width:"10px"}}),a.createElement("td",{style:{width:"80px",textAlign:"right"}},"Usuń załogę"))),a.createElement("div",{style:{overflowX:"scroll"}},a.createElement(le.Z5,{onDragStart:function(){return Z(!0)},onDragEnd:function(e){if(e.destination){var t=Array.from(m),n=be(t.splice(e.source.index,1),1)[0];t.splice(e.destination.index,0,n);var a=1;t.map((function(e){return e.order=a++})),f(Ze(t)),Z(!1)}}},a.createElement(le.bK,{droppableId:"selectedCases"},(function(e){return a.createElement("ol",ye({className:"selectedCases fw-bold",style:{minWidth:"600px"}},e.droppableProps,{ref:e.innerRef}),null==m?void 0:m.map((function(e,t){return a.createElement(le._l,{key:e.order,draggableId:e.order.toString(),index:t,draggable:!0},(function(t){var n,l,c;return a.createElement("li",ye({ref:t.innerRef},t.draggableProps,t.dragHandleProps),a.createElement(d.Z,{className:"my-1"},a.createElement(d.Z.Body,{className:"p-0"},a.createElement("table",{className:"m-0"},a.createElement("tr",{className:"d-table-row fw-normal align-middle"},a.createElement("td",{className:e.teamChecked&&e.entryFeePaid&&e.bkPositive?"bg-success":"",style:{width:"20px"}},a.createElement(y.G,{icon:g.yXf,onClick:function(){return R(e.team)},title:"Edytuj dane",cursor:"pointer"})),a.createElement("td",{style:{width:"55px"}},a.createElement("input",{style:{width:"90%",backgroundColor:"#ffad4f",fontWeight:e.forcedNumber?"700":"100",borderRadius:"20px",textAlign:"center"},type:"number",value:e.number,onChange:function(t){return function(e,t){Ie(t,""!==e?Number(e):" ")}(t.target.value,e)},onBlur:function(t){return function(e,t){var n=Number(e);m.find((function(e){return e.id!==t.id&&e.forcedNumber&&e.number===n}))&&Ie(t,"")}(t.target.value,e)}})),a.createElement("td",{style:{width:"270px"}},a.createElement(B.Ur,{team:e.team})),a.createElement("td",{style:{width:"270px"}},a.createElement(B.He,{line1:((null===(n=e.team.currentCar)||void 0===n?void 0:n.brand)||"")+" "+((null===(l=e.team.currentCar)||void 0===l?void 0:l.model)||""),driveType:null===(c=e.team.currentCar)||void 0===c?void 0:c.driveTypeEnum})),a.createElement("td",{style:{width:"100px",display:"flex"}},e.carClassId,!I&&a.createElement(h.Q,{className:"m-0 p-0",options:U,handleChange:function(t){Se(e.id,t)},isValid:!0,value:e.carClassId}),I&&a.createElement(h.Q,{className:"m-0 p-0",options:U,handleChange:function(t){Se(e.id,t)},isValid:!0,skipDefault:!0})),a.createElement("td",{style:{width:"90px",textAlign:"center"}},e.entryFeePaid?a.createElement(y.G,{className:"text-success",icon:g.egO}):a.createElement(y.G,{className:"text-danger",icon:g.WV2})),a.createElement("td",{style:{width:"90px"}},a.createElement(y.G,{icon:g.owJ,onClick:function(){return H(ke(e.team))},title:"Potwierdź wpisowe",cursor:"pointer"})),a.createElement("td",{style:{width:"90px"}},null!==e.entryFeeFile?a.createElement(y.G,{icon:g.q7m,onClick:function(){return t=e.team.teamId,n=e.team.driver,void(0,_.LR)("".concat((0,i.AC)(),"/event/getEntryFeeFile?eventId=").concat(r,"&teamId=").concat(t),"potwierdzenie_wplaty_"+n+".pdf");var t,n},title:"Pobierz plik",cursor:"pointer"}):a.createElement(a.Fragment,null)),a.createElement("td",{style:{width:"30px"}},e.teamChecked?a.createElement(y.G,{className:"text-success",icon:g.Yjj,onClick:function(){return X(e.team.teamId)},title:"Podgląd danych",cursor:"pointer"}):a.createElement(y.G,{icon:g.Yjj,onClick:function(){return X(e.team.teamId)},title:"Podgląd danych",cursor:"pointer"})),a.createElement("td",{style:{width:"30px"}},a.createElement(B.Jk,{oa:e.teamChecked,bk:e.bkPositive})),a.createElement("td",{style:{width:"60px",color:"red",textAlign:"right",paddingRight:"5px"}},a.createElement(y.G,{icon:g.nYk,onClick:function(){return A(ke(e.team))},title:"Usuń załoge",cursor:"pointer"})))))))}))})),e.placeholder)}))))),null!==D.teamId&&a.createElement(b.m,{show:!0,title:"Usuwanie załogi",text:"Czy napewno chcesz usunąć załoge: ".concat(D.driver),handleAccept:function(){(0,i.yd)(r,D.teamId,(function(){return xe()})),Ce()},handleClose:function(){Ce()}}),null!==F.teamId&&a.createElement(b.m,{show:!0,title:"Potwierdzanie wpisowego",text:"Czy napewno chcesz potwierdzić wpłatę wpisowego przez załoge: ".concat(F.driver),handleAccept:function(){(0,i.a$)(r,F.teamId,(function(){return xe()})),Ne()},handleClose:function(){Ne()}}),p&&a.createElement(b.m,{show:!0,title:"Zamykanie listy / Rozpoczynanie wydarzenia",text:"Czy napewno chcesz zamknąć listę i rozpocząć wydarzenie? Operacja nieodwracalna",handleAccept:function(){l().post("".concat((0,i.AC)(),"/event/startEvent?eventId=").concat(r),{headers:(0,E.Z)()}).then((function(){})),w(!1)},handleClose:function(){return w(!1)}}),q&&a.createElement(de,{show:!0,myTeam:q,eventId:r,onSave:function(e){return function(e){k(!0),(0,i.lN)(e,(function(){xe(),R()}))}(e)},okBtnLabel:"Zapisz zmiany",handleClose:function(){return R()},title:"Edycja danych załogi"}),re&&a.createElement(b.m,{show:!0,title:"Sortowanie",text:"Czy chcesz posortować zawodników? Pamiętaj, że zresetuje to numery które nie zostały wpisane ręcznie (nie-pogrubione). Jeśli chcesz nadać komuś numer na stałe edytuj wartość na liście.",handleAccept:function(){Z(!0),l().post("".concat((0,i.AC)(),"/event/sortByClass"),m,{headers:(0,E.Z)()}).then((function(e){f(e.data),Z(!1)})),ce(!1)},handleClose:function(){return ce(!1)}}),J&&a.createElement(V.o,{show:!0,handleClose:function(){xe(),X()},myEvent:{eventId:r,started:!1,teamId:J},mode:"preview"}),a.createElement(Q,{show:te,handleClose:function(){xe(),ne()},eventId:r}),a.createElement("div",{className:"text-center"},a.createElement("div",{className:"col-xl-12"},a.createElement("p",{className:"font12 m-0 p-0"},"Sortowanie można wykonać również ręcznie przesuwając zawodnika za pomocą myszy - po zakończeniu ZAPISZ"),a.createElement("p",{className:"font12 m-0 p-0"},"Zmiana kolejności zmienia numery startowe! Jeśli chcesz nadać numer startowy zawodnikowi wpisz go ręcznie"),a.createElement(o.Z,{className:"m-1",variant:"info",onClick:function(){return ce(!0)}},"Sortuj wstępnie wg. klas")),a.createElement("div",{className:"col-xl-12"},a.createElement(me.O,{variant:"primary",isLoading:oe,onClick:function(){return se(!0),void(0,_.LR)("".concat((0,i.AC)(),"/file/getEventTeamsData?eventId=").concat(r),"dokumenty_oa_"+c+".pdf",(function(){return se(!1)}))},msg:"Pobierz dokumenty OA",loadingMsg:"Pobieranie dokumentów OA"}),a.createElement(me.O,{variant:"primary",isLoading:fe,onClick:function(){return ve(!0),void(0,_.LR)("".concat((0,i.AC)(),"/file/getBkFiles?eventId=").concat(r),"dokumenty_bk_"+c+".pdf",(function(){return ve(!1)}))},msg:"Pobierz dokumenty BK",loadingMsg:"Pobieranie dokumentów BK"})),a.createElement("div",{className:"col-xl-12"},a.createElement(me.O,{variant:"warning",onClick:function(){return we(!0)},msg:"Zatwierdź listę startową"})),a.createElement("p",null,M))),a.createElement(s.Z.Footer,{className:"justify-content-center py-0"},a.createElement("div",{className:"d-flex"},j&&a.createElement(o.Z,{className:"m-2",variant:"success",onClick:function(){return ne(!0)}},"Dodaj zawodnika"),a.createElement(o.Z,{className:"m-2",variant:"success",onClick:function(){l().post("".concat((0,i.AC)(),"/event/saveNumbersAndClasses?eventId=").concat(r),m,{headers:(0,E.Z)()}).then((function(e){e.data?L("Kolejność i klasy zostały zapisane"):L("Coś poszło nie tak"),setTimeout((function(){return L()}),5e3)}))}},"Zapisz klasy i kolejność załóg"),a.createElement(o.Z,{className:"m-2",variant:"secondary",onClick:n},"Wyjdź")))),a.createElement(pe,{show:Ee,eventId:r,handleClose:function(){return we(!1)}}))};function Ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ne(Object(n),!0).forEach((function(t){xe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function je(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,l=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(a=n.next()).done)&&(l.push(a.value),!t||l.length!==t);c=!0);}catch(e){i=!0,r=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw r}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ze(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ze(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var Se=function(e){var t=e.show,n=e.handleClose,r=e.eventId,c=je((0,a.useState)(!1),2),u=c[0],d=c[1],p=je((0,a.useState)(""),2),y=p[0],h=p[1],b=je((0,a.useState)({}),2),w=b[0],C=b[1],N=je((0,a.useState)(),2),k=N[0],x=N[1];(0,a.useEffect)((function(){h(""),d(!1),x(),C({eventId:r,date:new Date,name:"",description:"",file:null})}),[t]);var j=function(e){C(ke(ke({},w),{},xe({},e.target.name,e.target.value)))};return a.createElement(s.Z,{show:t,onHide:n,backdrop:"static",keyboard:!1,size:"lg"},a.createElement(s.Z.Header,{className:"bg-dark-green text-white",closeButton:!0},a.createElement(s.Z.Title,null,"Dodawanie komunikatu")),a.createElement(s.Z.Body,null,a.createElement("div",{className:"d-flex justify-content-center text-center"},a.createElement("form",{onSubmit:function(e){d(!0),e.preventDefault(),l().post("".concat((0,i.AC)(),"/statement/addStatement"),w,{headers:(0,E.Z)()}).then((function(e){var t;k?(t=e.data,l().post("".concat((0,i.AC)(),"/statement/addFileToStatement?statementId=").concat(t),k,{headers:(0,E.Z)()}).then((function(e){h(e.data),d(!1)}))):(h("Dodano komunikat"),d(!1))}))}},a.createElement("div",{className:"row d-flex"},a.createElement(f.z4,{label:"Data komunikatu",onChange:function(e){return C(ke(ke({},w),{},{date:e}))},selected:w.date,calendarContainer:function(e){var t=e.className,n=e.children;return a.createElement(a.Fragment,null,a.createElement(v.CalendarContainer,{className:t},a.createElement("div",{style:{display:"flex"}},n)))},minDate:null,maxDate:null}),a.createElement(m.K,{label:"Nazwa komunikatu",name:"name",handleChange:j,value:w.name,big:!0,required:!0,icon:g.FL8})),a.createElement("div",{className:"row d-flex"},a.createElement("div",{className:"col-lg-12"},a.createElement(m.K,{label:"Treść komunikatu",inputPlaceholder:"Dodaj treść komunikatu tekstowego lub załącz plik który będzie udostępniony do pobrania",name:"description",handleChange:j,value:w.description,big:!0,icon:g.kQy,multiline:5}))),a.createElement("div",{className:"row d-flex"},a.createElement("div",{className:"col-lg-12"},a.createElement("span",{className:"font14 input-group-text py-0 ",id:""},"Dodaj plik"),a.createElement("div",{class:"input-group mb-0"},a.createElement("input",{type:"file",name:"file",accept:"application/pdf,application/vnd.ms-excel",onChange:function(e){return function(e){var t=e.target.files[0],n=new FormData;n.append("file",t),C(ke(ke({},w),{},{fileName:t.name})),x(n)}(e)}})))),a.createElement("div",{className:"text-center",style:{height:"50px"}},a.createElement("h4",{className:"fw-bold"},y),u&&a.createElement(T.Z,{animation:"border",variant:"secondary",size:"lg"})),a.createElement(o.Z,{className:"m-1",variant:"success",type:"submit"},"Dodaj"),a.createElement(o.Z,{className:"m-1",variant:"secondary",onClick:function(){return n()}},"Wyjdź")))))};function Ie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,l=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(a=n.next()).done)&&(l.push(a.value),!t||l.length!==t);c=!0);}catch(e){i=!0,r=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw r}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ze(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ze(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var Oe=function(e){var t=e.show,n=e.handleClose,r=e.event,c=Ie((0,a.useState)(),2),u=c[0],d=c[1],m=Ie((0,a.useState)(),2),f=m[0],v=m[1],p=Ie((0,a.useState)(),2),h=p[0],w=p[1],C=Ie((0,a.useState)(!0),2),N=C[0],k=C[1],x=Ie((0,a.useState)([]),2),j=x[0],z=x[1],S=Ie((0,a.useState)(!1),2),I=S[0],O=S[1],D=Ie((0,a.useState)(["file","delete"]),2),A=D[0],P=D[1];(0,a.useEffect)((function(){t&&(void 0!==(null==r?void 0:r.eventId)&&(0,i.Ot)(null==r?void 0:r.eventId,O),F())}),[t]),(0,a.useEffect)((function(){I&&P(["file"])}),[I]);var F=function(){k(t),(0,i.wO)(null==r?void 0:r.eventId,(function(e){z(e),k(!1)}))},K=(0,a.useMemo)((function(){return[{width:"7%",id:"index",Header:"L.p",accessor:function(e){return e.number},disableFilters:!0,Cell:function(e){return a.createElement("div",{className:"ps-2"}," ",e.row.index+1)}},{width:"25%",id:"date",Header:"Data dodania",accessor:function(e){return e.date},disableFilters:!0,Cell:function(e){return a.createElement("div",{className:"ps-2"},Z()(e.value).format("DD-MM-YYYY, HH:mm"))}},{width:"40%",id:"name",Header:"Nazwa",accessor:function(e){return e.name},disableFilters:!0},{width:"7%",id:"file",Header:"Plik",accessor:function(e){return e.file},disableFilters:!0},{width:"8%",id:"download",Header:"Plik",accessor:function(e){return e.fileName},disableFilters:!0,Cell:function(e){return e.value&&e.row.original.file?a.createElement(y.G,{icon:g.q7m,title:"Pobierz",cursor:"pointer",onClick:function(){(0,_.ZB)(e.row.original.file,e.value)}}):a.createElement(a.Fragment,null)}},{width:"9%",id:"view",Header:"Opis",accessor:function(e){return e.description},disableFilters:!0,Cell:function(e){return e.value?a.createElement(y.G,{icon:g.wn1,title:"Podgląd",cursor:"pointer",onClick:function(){return v(e.row.original)}}):a.createElement(a.Fragment,null)}},{width:"10%",id:"delete",Header:"Usuń",accessor:function(e){return e.description},disableFilters:!0,Cell:function(e){return a.createElement(y.G,{icon:g.nYk,title:"Usuń komunikat",cursor:"pointer",className:"text-danger",onClick:function(){return w(e.row.original)}})}}]}),[A]);return a.createElement(a.Fragment,null,a.createElement(s.Z,{show:t,style:{zIndex:u||f||h?1e3:1055},onHide:n,backdrop:"static",keyboard:!1,size:"xl"},a.createElement(s.Z.Header,{closeButton:!0,className:"bg-dark-green text-white"},a.createElement(s.Z.Title,{className:"text-white"},"Komunikaty")),a.createElement(s.Z.Body,null,a.createElement("h5",{className:"text-center"}," ",r.name)," ",N?a.createElement("div",{className:"text-center"},a.createElement(T.Z,{animation:"border",variant:"secondary",size:"lg"})):0===j.length?a.createElement("h4",{className:"text-center pt-3"},"Organizator nie dodał komunikatów"):a.createElement(H.Z,{columns:K,data:j,hiddenColumns:A,isLoading:N,isHeader:!0,manualPagination:!0})),a.createElement(s.Z.Footer,{className:"justify-content-center"},a.createElement("div",{className:"d-flex"},I&&a.createElement(o.Z,{className:"m-1",variant:"success",onClick:function(){return d(!0)}},"Dodaj komunikat"),a.createElement(o.Z,{className:"m-1",variant:"secondary",onClick:n},"Wyjdź")))),a.createElement(Se,{show:u,handleClose:function(){d(),F()},eventId:null==r?void 0:r.eventId}),f&&a.createElement(b.e,{show:!0,title:"Komunikat "+f.name,text:"Dodano: "+Z()(f.date).format("dddd, DD MMM YYYY, HH:mm")+"\n\n"+f.description,handleAccept:function(){return v()}}),h&&a.createElement(b.m,{show:!0,title:"Usuwanie komunikatu",text:"Czy chcesz usunąć komunikat ".concat(h.name," ?"),handleAccept:function(){var e;e=h.statementId,l().delete("".concat((0,i.AC)(),"/statement/deleteStatement?statementId=").concat(e),{headers:(0,E.Z)()}).then((function(e){return F()})),w()},handleClose:function(){return w()}}))};function De(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,l=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(a=n.next()).done)&&(l.push(a.value),!t||l.length!==t);c=!0);}catch(e){i=!0,r=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw r}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ae(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ae(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var Pe=function(e){var t=De((0,a.useState)([]),2),n=t[0],r=t[1],s=De((0,a.useState)([]),2),u=s[0],m=s[1],f=De((0,a.useState)(),2),v=f[0],p=f[1],y=De((0,a.useState)(),2),g=y[0],h=y[1],b=De((0,a.useState)(),2),w=b[0],C=b[1],N=De((0,a.useState)(!0),2),k=N[0],x=N[1],j=De((0,a.useState)(!0),2),z=j[0],I=j[1],Z=De((0,a.useState)(!1),2),O=Z[0],D=Z[1],A=De((0,a.useState)(!1),2),P=A[0],H=A[1],K=De((0,a.useState)(),2),B=K[0],M=K[1],L=(0,c.TH)().search,U=(0,c.s0)(),G=function(){x(!0),I(!0),l().get("".concat((0,i.AC)(),"/event/getAllFuture"),{headers:(0,E.Z)()}).then((function(e){if(r(e.data.sort((function(e,t){return e.date<t.date?-1:1}))),void 0!==L&&!P){var t=L.includes("&")?L.indexOf("&"):L.length,n=e.data.find((function(e){return e.eventId===Number(L.substring(0,t).replace("?",""))}));C(n),L=null,H(!0)}x(!1)})),l().get("".concat((0,i.AC)(),"/event/getAllBefore"),{headers:(0,E.Z)()}).then((function(e){m(e.data.sort((function(e,t){return e.date>t.date?-1:1}))),I(!1)}))};return(0,a.useEffect)((function(){G(),null!==sessionStorage.getItem("username")&&l().get("".concat((0,i.AC)(),"/auth/isMainAdmin?login=").concat(sessionStorage.getItem("username")),{headers:(0,E.Z)()}).then((function(e){D(e.data)}))}),[]),a.createElement(a.Fragment,null,a.createElement(d.Z,{style:{borderRadius:"0"},className:" my-1 bg-dark-green text-white green-header"},a.createElement("h4",{style:{zIndex:1},className:"mb-1"},"Najbliższe wydarzenia")),a.createElement("div",{className:"row mx-0 justify-content-center card-body p-0"},k&&0===n.length&&a.createElement("div",{className:"text-center"},a.createElement(T.Z,{animation:"border",variant:"secondary",size:"lg"})),n.map((function(e){return a.createElement(F,{key:e.eventId,event:e,onJoin:function(){return C(e)},onScore:function(){localStorage.setItem("eventId",e.eventId),U("event",{state:{eventId:e.eventId}})},onTeamList:function(){(0,i.Ot)(e.eventId,D),h(e)},onStatement:function(){return M(e)},onEdit:function(){return p(e)},mainAdmin:O})}))),a.createElement("div",{className:"py-4"}),a.createElement(d.Z,{style:{borderRadius:"0"},className:" my-1 bg-dark-green text-white green-header"},a.createElement("h4",{style:{zIndex:1},className:"mb-1"},"Archiwalne wydarzenia")),a.createElement("div",{className:"row mx-0 justify-content-center card-body"},z&&0===u.length&&a.createElement("div",{className:"text-center"},a.createElement(T.Z,{animation:"border",variant:"secondary",size:"lg"})),u.map((function(e){return a.createElement(F,{key:e.eventId,event:e,onJoin:function(){return C(e)},onScore:function(){localStorage.setItem("eventId",e.eventId),U("event",{state:{eventId:e.eventId}})},onTeamList:function(){return h(e)},onStatement:function(){return M(e)},onEdit:function(){return p(e)},mainAdmin:O})}))),a.createElement("div",{className:"p-3 border-top"},O&&a.createElement(o.Z,{className:"border-top mx-3",variant:"primary",onClick:function(){return p(!0)}},"Dodaj wydarzenie")),a.createElement(S,{show:void 0!==v,handleClose:function(){p(),G()},event:v}),O&&a.createElement(Ce,{show:void 0!==g,handleClose:function(){h(),G()},eventId:null==g?void 0:g.eventId,eventName:null==g?void 0:g.name,started:null==g?void 0:g.started}),!O&&a.createElement(Y,{show:void 0!==g,handleClose:function(){h(),G()},eventId:null==g?void 0:g.eventId,started:null==g?void 0:g.started}),B&&a.createElement(Oe,{show:!0,handleClose:function(){return M()},event:B}),a.createElement(re,{show:void 0!==w,handleClose:function(){C(),G()},event:w}))}}}]);
//# sourceMappingURL=838.js.map