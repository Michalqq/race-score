"use strict";(self.webpackChunkjavascript=self.webpackChunkjavascript||[]).push([[229],{2763:function(e,t,a){a.d(t,{E:function(){return o},O:function(){return c}});var n=a(7294),r=a(5005),l=a(6968),c=function(e){var t=e.variant,a=e.onClick,c=e.disabled,o=void 0!==c&&c,i=e.isLoading,u=e.msg,s=e.loadingMsg;return n.createElement(r.Z,{className:"m-1",variant:t,onClick:a,disabled:i||o},i?n.createElement(n.Fragment,null,n.createElement(l.Z,{size:"sm",animation:"border"})," "," "+s):n.createElement(n.Fragment,null,u))},o=function(e){var t=e.onClick,a=e.label,r=e.isConfirmed,l=void 0!==r&&r,c=e.name,o=e.value;return n.createElement("div",{className:"form-check"},n.createElement("input",{onClick:t,defaultChecked:l,className:"form-check-input",type:"radio",name:c,value:o}),n.createElement("label",{className:"form-check-label"},a))}},8229:function(e,t,a){a.r(t),a.d(t,{AddScorePage:function(){return g}});var n=a(7294),r=a(6668),l=a(9669),c=a.n(l),o=a(7577),i=a(2763),u=a(9942),s=a(6974),d=a(9952),m=a(5005),v=a(7091);function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,l=[],c=!0,o=!1;try{for(a=a.call(e);!(c=(n=a.next()).done)&&(l.push(n.value),!t||l.length!==t);c=!0);}catch(e){o=!0,r=e}finally{try{c||null==a.return||a.return()}finally{if(o)throw r}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?b(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var g=function(e){var t,a=(0,s.TH)(),l=(0,s.s0)(),b=a.state.eventId,g=[{value:"NEW",desc:"Wprowadzanie nowych wyników"},{value:"EDIT",desc:"Tryb edycji wyników"}],p=f((0,n.useState)(""),2),y=p[0],h=p[1],E=f((0,n.useState)(g[0].value),2),S=E[0],k=E[1],N=f((0,n.useState)(),2),w=N[0],C=N[1],I=f((0,n.useState)([]),2),x=I[0],A=I[1],z=f((0,n.useState)([]),2),Z=z[0],j=z[1],T=f((0,n.useState)(),2),M=T[0],P=(T[1],f((0,n.useState)(),2)),O=P[0],W=(P[1],f((0,n.useState)(),2)),K=W[0],U=W[1],D=f((0,n.useState)(),2),F=D[0],L=D[1],Q=f((0,n.useState)(),2),V=Q[0],H=Q[1],$=f((0,n.useState)(),2),_=$[0],q=$[1],B=f((0,n.useState)(),2),G=B[0],J=B[1],R=f((0,n.useState)(!1),2),X=R[0],Y=R[1],ee=f((0,n.useState)(!1),2),te=ee[0],ae=ee[1],ne=f((0,n.useState)(!0),2),re=ne[0],le=ne[1],ce=f((0,n.useState)(!1),2),oe=ce[0],ie=ce[1],ue=function(){Y(!0),c().get("".concat((0,u.AC)(),"/team/getTeamOptions?eventId=").concat(b,"&stageId=").concat(G,"&mode=").concat(S),{headers:(0,d.Z)()}).then((function(e){j(e.data),Y(!1),ae(!1),0===e.data.length&&(me(),h("Wszystkie wyniki wybranego odcinka zostały wprowadzone"))}))};(0,n.useEffect)((function(){void 0===b&&l("/"),c().get("".concat((0,u.AC)(),"/event/getPsOptions?eventId=").concat(b),{headers:(0,d.Z)()}).then((function(e){var t;A(e.data),J(null===(t=e.data[0])||void 0===t?void 0:t.value)}))}),[]),(0,n.useEffect)((function(){x.length>0&&void 0!==G&&ue()}),[G,x]),(0,n.useEffect)((function(){if(0!==Z.length){var e=Z.find((function(e){return e.value===_}));q(e?null==e?void 0:e.value:Z[0].value)}}),[Z]),(0,n.useEffect)((function(){void 0!==_&&S===g[1].value&&se()}),[_,S]),(0,n.useEffect)((function(){void 0!==G&&ue()}),[S]);var se=function(){c().get("".concat((0,u.AC)(),"/score/getTeamScore?eventId=").concat(b,"&stageId=").concat(G,"&teamId=").concat(_)).then((function(e){U(e.data.scoreMin),L(e.data.scoreSec),H(e.data.scoreMiliSec),C(e.data.stageScoreId)}))},de=function(e){e.target.checked&&S!==e.target.value&&(k(e.target.value),me(),j([]))},me=function(){ae(!0),U(""),L(""),H("")};return n.createElement("div",{className:"u-text-center  card-body pb-5"},n.createElement("div",{className:"u-box-shadow"},n.createElement("div",{className:"col-xl-12"},n.createElement("h5",{className:"pb-1 mb-0 border-bottom"},"Dodaj wynik:")),n.createElement("div",{className:"row justify-content-center"},n.createElement("div",{className:"col-lg-4 pb-1 border-bottom"},n.createElement("div",{className:"centered-grid form-group "},n.createElement(i.E,{label:g[0].desc,value:g[0].value,isConfirmed:S===g[0].value,onClick:function(e){return de(e)},name:"editMode"}),n.createElement(i.E,{label:g[1].desc,value:g[1].value,isConfirmed:!1,onClick:function(e){return de(e)},name:"editMode"})),n.createElement("div",{className:"pb-0"}),n.createElement(r.Q,{label:"Odcinek PS",options:x,value:sessionStorage.getItem("refereeStageId"),handleChange:function(e){J(e),sessionStorage.setItem("refereeStageId",e)},isValid:!0}),n.createElement(r.Q,{label:"Załoga",options:Z,value:_,handleChange:function(e){return q(e)},isValid:!0,isLoading:X})),n.createElement("div",{className:"col-lg-4 pb-1 border-bottom"},n.createElement("div",{className:"row"},n.createElement("div",{className:"col-xl-12"},n.createElement("h5",{className:"mb-0"},"Czas"),n.createElement("div",{className:"inline-flex"},n.createElement(o.K,{label:"Minuty",inputPlaceholder:"00",value:K,handleChange:function(e){return U(e.target.value)},disabled:te,onlyNumber:!0,type:"number"}),n.createElement(o.K,{label:"Sekundy",inputPlaceholder:"00",value:F,handleChange:function(e){return L(e.target.value)},disabled:te,onlyNumber:!0,max:59,type:"number"}),n.createElement(o.K,{label:"Setne",inputPlaceholder:"00",value:V,handleChange:function(e){return H(e.target.value)},disabled:te,onlyNumber:!0,max:99,type:"number"})),n.createElement("div",{className:"col-xl-12 pt-1 fw-bolder"},y),n.createElement("div",{className:"col-xl-12 pt-1 fw-bolder"},re),n.createElement("div",{className:"col-xl-12 pt-2"},n.createElement("button",{type:"button",className:"btn btn-success mx-2 py-1",onClick:function(){if(null==K||""===K||null==F||""===F||null==V||""===V)le("Wprowadź pełny wynik");else{le();var e=60*M+O,t=60*Number(K)*1e3+1e3*Number(F)+10*Number(V);a={teamId:_,stageId:G,stageStartTime:e,score:t,stageScoreId:S===g[1].value?w:null},c().post("".concat((0,u.AC)(),"/score/addScore"),a,{headers:(0,d.Z)()}).then((function(e){ue(),h(e.data),setTimeout((function(){return h()}),1e4)})),me()}var a},disabled:te},"Zapisz wynik"),S===g[1].value&&n.createElement("button",{type:"button",className:"btn btn-danger mx-2",onClick:function(){return ie(!0)},disabled:te},"Usuń wynik"))))))),n.createElement("div",{className:"col-sm pt-3"}),n.createElement(m.Z,{className:"mx-2 py-1 px-2",variant:"primary",onClick:function(){return l("/add_penalty",{state:{eventId:b}})}},"Przejdź do dodawania kar"),n.createElement(m.Z,{className:"mx-2 py-1 px-2",variant:"success",onClick:function(){return l("/event",{state:{eventId:b}})}},"Wyniki"),oe&&n.createElement(v.m,{show:!0,title:"Usuwanie załogi",text:"Czy napewno chcesz usunąć wynik załogi:  ".concat(null===(t=Z.find((function(e){return e.value===_})))||void 0===t?void 0:t.label),handleAccept:function(){var e;e={teamId:_,stageId:G,stageScoreId:S===g[1].value?w:null},c().post("".concat((0,u.AC)(),"/score/removeScore"),e,{headers:(0,d.Z)()}).then((function(e){ue(),h(e.data),setTimeout((function(){return h()}),1e4)})),ie(!1)},handleClose:function(){ie(!1)}}))};t.default=g}}]);
//# sourceMappingURL=229.js.map