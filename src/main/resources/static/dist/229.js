"use strict";(self.webpackChunkjavascript=self.webpackChunkjavascript||[]).push([[229],{2763:function(e,t,n){n.d(t,{E:function(){return o},O:function(){return c}});var a=n(7294),r=n(5005),l=n(6968),c=function(e){var t=e.variant,n=e.onClick,c=e.isLoading,o=e.msg,i=e.loadingMsg;return a.createElement(r.Z,{className:"m-1",variant:t,onClick:n},c?a.createElement(a.Fragment,null,a.createElement(l.Z,{size:"sm",animation:"border"})," "," "+i):a.createElement(a.Fragment,null,o))},o=function(e){var t=e.onClick,n=e.label,r=e.isConfirmed,l=void 0!==r&&r,c=e.name,o=e.value;return a.createElement("div",{className:"form-check"},a.createElement("input",{onClick:t,defaultChecked:l,className:"form-check-input",type:"radio",name:c,value:o}),a.createElement("label",{className:"form-check-label"},n))}},7091:function(e,t,n){n.d(t,{e:function(){return o},m:function(){return c}});var a=n(7294),r=n(1881),l=n(5005),c=function(e){var t=e.show,n=e.title,c=e.text,o=e.handleAccept,i=e.handleClose;return a.createElement(r.Z,{show:t,onHide:i,backdrop:"static",keyboard:!1},a.createElement(r.Z.Header,{closeButton:!0},a.createElement(r.Z.Title,null,n)),a.createElement(r.Z.Body,null,a.createElement("p",null,c)),a.createElement(r.Z.Footer,{className:"justify-content-center"},a.createElement(l.Z,{className:"mx-3",variant:"secondary",onClick:i},"Anuluj"),a.createElement(l.Z,{className:"px-4 mx-3",variant:"success",onClick:o},"OK")))},o=function(e){var t=e.show,n=e.title,c=e.text,o=e.handleAccept;return a.createElement(r.Z,{show:t,onHide:o,backdrop:"static",keyboard:!1},a.createElement(r.Z.Header,{closeButton:!0},a.createElement(r.Z.Title,null,n)),a.createElement(r.Z.Body,null,a.createElement("p",{style:{whiteSpace:"break-spaces"}},c)),a.createElement(r.Z.Footer,{className:"justify-content-center"},a.createElement(l.Z,{className:"px-4 mx-3",variant:"success",onClick:o},"OK")))}},8229:function(e,t,n){n.r(t),n.d(t,{AddScorePage:function(){return p}});var a=n(7294),r=n(6668),l=n(9669),c=n.n(l),o=n(7577),i=n(2763),u=n(9942),s=n(6974),d=n(9952),m=n(5005),f=n(7091);function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,l=[],c=!0,o=!1;try{for(n=n.call(e);!(c=(a=n.next()).done)&&(l.push(a.value),!t||l.length!==t);c=!0);}catch(e){o=!0,r=e}finally{try{c||null==n.return||n.return()}finally{if(o)throw r}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var p=function(e){var t,n=(0,s.TH)(),l=(0,s.s0)(),b=n.state.eventId,p=[{value:"NEW",desc:"Wprowadzanie nowych wyników"},{value:"EDIT",desc:"Tryb edycji wyników"}],E=v((0,a.useState)(""),2),y=E[0],h=E[1],g=v((0,a.useState)(p[0].value),2),k=g[0],S=g[1],N=v((0,a.useState)(),2),w=N[0],C=N[1],x=v((0,a.useState)([]),2),I=x[0],Z=x[1],A=v((0,a.useState)([]),2),j=A[0],z=A[1],T=v((0,a.useState)(),2),O=T[0],M=(T[1],v((0,a.useState)(),2)),P=M[0],H=(M[1],v((0,a.useState)(),2)),K=H[0],W=H[1],B=v((0,a.useState)(),2),F=B[0],U=B[1],D=v((0,a.useState)(),2),L=D[0],Q=D[1],V=v((0,a.useState)(),2),$=V[0],_=V[1],q=v((0,a.useState)(),2),G=q[0],J=q[1],R=v((0,a.useState)(!1),2),X=R[0],Y=R[1],ee=v((0,a.useState)(!1),2),te=ee[0],ne=ee[1],ae=v((0,a.useState)(!0),2),re=ae[0],le=ae[1],ce=v((0,a.useState)(!1),2),oe=ce[0],ie=ce[1],ue=function(){Y(!0),c().get("".concat((0,u.AC)(),"/team/getTeamOptions?stageId=").concat(G,"&mode=").concat(k),{headers:(0,d.Z)()}).then((function(e){z(e.data),Y(!1),ne(!1),0===e.data.length&&(me(),h("Wszystkie wyniki wybranego odcinka zostały wprowadzone"))}))};(0,a.useEffect)((function(){void 0===b&&l("/"),c().get("".concat((0,u.AC)(),"/event/getPsOptions?eventId=").concat(b),{headers:(0,d.Z)()}).then((function(e){var t;Z(e.data),J(null===(t=e.data[0])||void 0===t?void 0:t.value)}))}),[]),(0,a.useEffect)((function(){I.length>0&&void 0!==G&&ue()}),[G,I]),(0,a.useEffect)((function(){if(0!==j.length){var e=j.find((function(e){return e.value===$}));_(e?null==e?void 0:e.value:j[0].value)}}),[j]),(0,a.useEffect)((function(){void 0!==$&&k===p[1].value&&se()}),[$,k]),(0,a.useEffect)((function(){void 0!==G&&ue()}),[k]);var se=function(){c().get("".concat((0,u.AC)(),"/score/getTeamScore?eventId=").concat(b,"&stageId=").concat(G,"&teamId=").concat($)).then((function(e){W(e.data.scoreMin),U(e.data.scoreSec),Q(e.data.scoreMiliSec),C(e.data.stageScoreId)}))},de=function(e){e.target.checked&&k!==e.target.value&&(S(e.target.value),me(),z([]))},me=function(){ne(!0),W(""),U(""),Q("")};return a.createElement("div",{className:"u-text-center"},a.createElement("div",{className:"u-box-shadow"},a.createElement("div",{className:"col-xl-12"},a.createElement("h5",{className:"pb-1 mb-0 border-bottom"},"Dodaj wynik:")),a.createElement("div",{className:"row justify-content-center"},a.createElement("div",{className:"col-lg-4 pb-1 border-bottom"},a.createElement("div",{className:"centered-grid form-group "},a.createElement(i.E,{label:p[0].desc,value:p[0].value,isConfirmed:k===p[0].value,onClick:function(e){return de(e)},name:"editMode"}),a.createElement(i.E,{label:p[1].desc,value:p[1].value,isConfirmed:!1,onClick:function(e){return de(e)},name:"editMode"})),a.createElement("div",{className:"pb-0"}),a.createElement(r.Q,{label:"Odcinek PS",options:I,value:sessionStorage.getItem("refereeStageId"),handleChange:function(e){J(e),sessionStorage.setItem("refereeStageId",e)},isValid:!0}),a.createElement(r.Q,{label:"Załoga",options:j,value:$,handleChange:function(e){return _(e)},isValid:!0,isLoading:X})),a.createElement("div",{className:"col-lg-4 pb-1 border-bottom"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-xl-12"},a.createElement("h5",{className:"mb-0"},"Czas"),a.createElement("div",{className:"inline-flex"},a.createElement(o.K,{label:"Minuty",inputPlaceholder:"00",value:K,handleChange:function(e){return W(e.target.value)},disabled:te,onlyNumber:!0,type:"number"}),a.createElement(o.K,{label:"Sekundy",inputPlaceholder:"00",value:F,handleChange:function(e){return U(e.target.value)},disabled:te,onlyNumber:!0,max:59,type:"number"}),a.createElement(o.K,{label:"Setne",inputPlaceholder:"00",value:L,handleChange:function(e){return Q(e.target.value)},disabled:te,onlyNumber:!0,max:99,type:"number"})),a.createElement("div",{className:"col-xl-12 pt-1 fw-bolder"},y),a.createElement("div",{className:"col-xl-12 pt-1 fw-bolder"},re),a.createElement("div",{className:"col-xl-12 pt-2"},a.createElement("button",{type:"button",className:"btn btn-success mx-2 py-1",onClick:function(){if(null==K||""===K||null==F||""===F||null==L||""===L)le("Wprowadź pełny wynik");else{le();var e=60*O+P,t=60*Number(K)*1e3+1e3*Number(F)+10*Number(L);n={teamId:$,stageId:G,stageStartTime:e,score:t,stageScoreId:k===p[1].value?w:null},c().post("".concat((0,u.AC)(),"/score/addScore"),n,{headers:(0,d.Z)()}).then((function(e){ue(),h(e.data),setTimeout((function(){return h()}),1e4)})),me()}var n},disabled:te},"Zapisz wynik"),k===p[1].value&&a.createElement("button",{type:"button",className:"btn btn-danger mx-2",onClick:function(){return ie(!0)},disabled:te},"Usuń wynik"))))))),a.createElement("div",{className:"col-sm pt-3"}),a.createElement(m.Z,{className:"mx-2 py-1 px-2",variant:"primary",onClick:function(){return l("/add_penalty",{state:{eventId:b}})}},"Przejdź do dodawania kar"),a.createElement(m.Z,{className:"mx-2 py-1 px-2",variant:"success",onClick:function(){return l("/event",{state:{eventId:b}})}},"Wyniki"),oe&&a.createElement(f.m,{show:!0,title:"Usuwanie załogi",text:"Czy napewno chcesz usunąć wynik załogi:  ".concat(null===(t=j.find((function(e){return e.value===$})))||void 0===t?void 0:t.label),handleAccept:function(){var e;e={teamId:$,stageId:G,stageScoreId:k===p[1].value?w:null},c().post("".concat((0,u.AC)(),"/score/removeScore"),e,{headers:(0,d.Z)()}).then((function(e){ue(),h(e.data),setTimeout((function(){return h()}),1e4)})),ie(!1)},handleClose:function(){ie(!1)}}))};t.default=p}}]);
//# sourceMappingURL=229.js.map